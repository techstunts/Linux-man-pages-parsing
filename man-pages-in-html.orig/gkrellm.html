
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>gkrellm</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="/global/main.css" title="default">
</head>

<body>



<div id="container">
<div id="banner">
<a href='/'><img src='/include/images/linuxmanpages_logo.png' alt='Linux Man Pages' border='0'></a>
</div>
<div id="formLinks">
<table id="searchTable">
<tr>
<form action='/search.php' method='post'>
<td>Search For :</td>
<td><input type="text" size="20" name="term"></td>
<td>in: </td>

<td>
<select name="section">
<option value="-1">All Sections</option>
<option value="1">1. General Commands</option>
<option value="2">2. System Calls</option>
<option value="3">3. Subroutines</option>
<option value="4">4. Special Files</option>
<option value="5">5. File Formats</option>
<option value="6">6. Games and Demos</option>
<option value="7">7. Macros and Conventions</option>
<option value="8">8. Maintenence Commands</option>
</select> 
</td>
<td>
<input type='hidden' name='submitted' value='1'>
<input type="submit" value="Get Man Page">
</td>
</form>
</tr>
</table>
</div>
<div id="content">

<div id='catHeader'><table width='100%'><tr><td>
<H1>gkrellm</H1>
Section: User's Manual (1)<BR>Updated: June 7, 2003<BR>
</td><td align='right' valign='bottom'><div class='ad_header_right'></div></td></tr></table></div></div>
<div id='categories'>
<div class='ad_man_right'>
</div>

<P>
<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

gkrellm - The GNU Krell Monitors
<P>
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>gkrellm</B>

[
<B>--help</B>

]
[
<B>-t</B>

|
<B>--theme</B>

dir
]
[
<B>-g</B>

|
<B>--geometry</B>

+x+y
]
[
<B>-wm</B>

]
[
<B>-w</B>

|
<B>--withdrawn</B>

]
[
<B>-c</B>

|
<B>--config</B>

suffix
]
[
<B>-nc</B>

]
[
<B>-f</B>

|
<B>--force-host-config</B>

]
[
<B>-demo</B>

]
[
<B>-p</B>

|
<B>--plugin</B>

plugin.so
]
[
<B>-s</B>

|
<B>--server</B>

hostname
]
[
<B>-P</B>

|
<B>--port</B>

server_port
]
<P>
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<P>

With a single process,
<B>gkrellm</B>

manages multiple stacked monitors and supports applying
themes to match the monitors appearance to your window manager, Gtk, or any
other theme.
<P>
<A NAME="lbAE">&nbsp;</A>
<H3>FEATURES</H3>

<DL COMPACT>
<DT>*<DD>
SMP CPU, Disk, Proc, and active net interface monitors with LEDs.
<DT>*<DD>
Internet monitor that displays current and charts historical port hits.
<DT>*<DD>
Memory and swap space usage meters and a system uptime monitor.
<DT>*<DD>
File system meters show capacity/free space and can mount/umount.
<DT>*<DD>
A mbox/maildir/MH/POP3/IMAP mail monitor which can launch a mail reader or
remote mail fetch program.
<DT>*<DD>
Clock/calendar and hostname display.
<DT>*<DD>
Laptop Battery monitor.
<DT>*<DD>
CPU/motherboard temperature/fan/voltages display with warnings and
alarms.  Linux requires lm_sensors modules and Windows requires MBM.
<DT>*<DD>
Multiple monitors managed by a single process to reduce system load.
<DT>*<DD>
A timer button that can execute PPP or ISDN logon/logoff scripts.
<DT>*<DD>
Charts are autoscaling with configurable grid line resolution, or
<DT>*<DD>
can be set to a fixed scale mode.
<DT>*<DD>
Separate colors for &quot;in&quot; and &quot;out&quot; data.  The in color is used for
CPU user time, disk read, forks, and net receive data.  The out color
is used for CPU sys time, disk write, load, and net transmit data.
<DT>*<DD>
Commands can be configured to run when monitor labels are clicked.
<DT>*<DD>
Data can be collected from a
<B>gkrellmd</B>

server running on a remote machine.
<DT>*<DD>
<B>gkrellm</B>

is plugin capable so special interest monitors can be created.
<DT>*<DD>
Many themes are available.
<P>
</DL>
<A NAME="lbAF">&nbsp;</A>
<H3>USER INTERFACE</H3>

<B><DL COMPACT>
<DT>* Top frame<DD>
</B>

<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Btn 1</I>

<DD>
Press and drag to move
<B>gkrellm</B>

window.
<DT><I>Btn 3</I>

<DD>
Popup main menu.
</DL>
</DL>

<B><DT>* Side frames<DD>
</B>

<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Btn 2</I>

<DD>
Slide
<B>gkrellm</B>

window shut (Btn1 if -m2 option).
<DT><I>Btn 3</I>

<DD>
Popup main menu.
</DL>
</DL>

<B><DT>* All charts<DD>
</B>

<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Btn 1</I>

<DD>
Toggle draw of extra info on the chart.
<DT><I>Btn 3</I>

<DD>
Brings up a chart configuration window.
</DL>
</DL>

<B><DT>* Inet charts<DD>
</B>



<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Btn 2</I>

<DD>
Toggle between port hits per minute and hour.
</DL>
</DL>

<B><DT>* Most panels<DD>
</B>

<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Btn 3</I>

<DD>
Opens the configuration window directly to a monitor's configuration page.
</DL>
</DL>

<B><DT>* File System meter panels<DD>
</B>

<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Btn 1,2</I>

<DD>
Toggle display of label and fs capacity scrolling display.
The mount button runs mount/umount commands.
If ejectable, left click the eject button to open tray, right click to close.
</DL>
</DL>

<B><DT>* Mem and Swap meter panels<DD>
</B>

<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Btn 1,2</I>

<DD>
Toggle display of label and memory or swap capacity scrolling display.
</DL>
</DL>

<B><DT>* Mailbox monitor message count button<DD>
</B>

<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Btn 1</I>

<DD>
Launch a mail reader program.  If options permit, also
stop animations and reset remote message counts.
<DT><I>Btn 2</I>

<DD>
Toggle mail check mute mode which inhibits the sound
notify program, and optionally inhibits all mail checking.
</DL>
</DL>

<B><DT>* Mailbox monitor envelope decal<DD>
</B>

<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Btn 1</I>

<DD>
Force a mail check regardless of mute or timeout state.
</DL>
</DL>

<B><DT>* Battery monitor panel<DD>
</B>



<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Btn 1</I>

<DD>
On the charging state decal toggles battery minutes left,
percent level, and charge rate display.
<DT><I>Btn 2</I>

<DD>
Anywhere on the panel also toggles the display.
</DL>
</DL>

<B><DT>* Keyboard shortcuts<DD>
</B>

<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>F1</I>

<DD>
popup the user config window.
<DT><I>F2</I>

<DD>
popup the main menu.
<DT><I>Page_Up</I>

<DD>
previous theme or theme alternative.
<DT><I>Page_Down</I>

<DD>
next theme or theme alternative.
<DT><I>&lt;Ctl&gt;Page_Up</I>

<DD>
previous theme, skipping any theme alternatives.
<DT><I>&lt;Ctl&gt;Page_Down</I>

<DD>
next theme, skipping any theme alternatives.
</DL>
</DL>

</DL>
<P>

If a command has been configured to be launched for a monitor, then
a button will appear when the mouse enters the panel of that monitor.
Clicking the button will launch the command.
<P>

A right button mouse click on the side or top frames of the
<B>gkrellm</B>

window will pop up a user configuration window where you can configure
all the builtin and plugin monitors.  Chart appearance may be configured
by right clicking on a chart, and right clicking on many panels will open
the configuration window directly to the corresponding monitor's
configuration page.
<P>
<A NAME="lbAG">&nbsp;</A>
<H2>OPTIONS</H2>

<DL COMPACT>
<DT><B>--help</B>

<DD>
Displays this manual page.
<DT><B>-t, --theme dir</B>

<DD>
<B>gkrellm</B>

will load all theme image files it finds in
<I>dir</I>

and parse the
<I>gkrellmrc</I>

file if one exists.  This option overrides
the loading of the last theme you configured to be loaded in
the Themes configuration window.  Theme changes are not saved
when
<B>gkrellm</B>

is run with this option.
<DT><B>-g, --geometry +x+y</B>

<DD>
Makes
<B>gkrellm</B>

move to an
<I>(x,y)</I>

position on the screen at startup.  Standard X window geometry position
(not size) formats are parsed, ie +x+y -x+y +x-y -x-y.  Except, negative
geometry positions are not recognized (ie +-x--y ).
<DT><B>-wm</B>

<DD>
Forces
<B>gkrellm</B>

to start up with window manager decorations.  The
default is no decorations because there are themed borders.
<DT><B>-w, --withdrawn</B>

<DD>
<B>gkrellm</B>

starts up in withdrawn mode so it can go into the Blackbox
slit (and maybe WindowMaker dock).
<DT><B>-c, --config suffix</B>

<DD>
Use alternate config files generated by appending
<I>suffix</I>

to config file names.  This overrides any previous host config which may have
been setup with the below option.
<DT><B>-f, --force-host-config</B>

<DD>
If
<B>gkrellm</B>

is run once with this option and then the configuration
or theme is changed, the config files that are written will have
a
<I>-hostname</I>

appended to them.  Subsequent runs will detect the
<I>user-config-hostname</I>

and
<I>gkrellm_theme.cfg-hostname</I>

files and use
them instead of the normal configuration files (unless the
<B>--config</B>

option is specified).   This is a convenience for allowing
remote
<B>gkrellm</B>

independent config files in a shared home directory,
and for the hostname to show up in the X title for window management.
This option has no effect in client mode.
<DT><B>-s, --server hostname</B>

<DD>
Run in client mode by connecting to and collecting data from a
<B>gkrellmd</B>

server on 
<I>hostname</I>

<DT><B>-P, --port server_port</B>

<DD>
Use
<I>server_port</I>

for the
<B>gkrellmd</B>

server connection.
<DT><B>-nc</B>

<DD>
No config mode.  The config menu is blocked so no config changes
can be made.  Useful in certain environments, or maybe for running
on a
<B><A HREF="../man1/xdm.1.php">xdm</A></B>(1)

login screen or during a screensaver mode?
<DT><B>-demo</B>

<DD>
Force enabling of many monitors so themers can see everything. All
config saving is inhibited.
<DT><B>-p, --plugin plugin.so</B>

<DD>
For plugin development, load the command line specified plugin so you
can avoid repeated install steps in the development cycle.
<P>
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>BUILTIN MONITORS</H2>

<P>
<A NAME="lbAI">&nbsp;</A>
<H3>Charts</H3>

<P>

The default for most charts is to automatically adjust the number of
grid lines drawn and the resolution per grid so drawn data will be
nicely visible.  You may change this to fixed grids of 1-5 and/or
fixed grid resolutions in the chart configuration windows.  However,
some combination of the auto scaling modes may give best results.
<P>

Auto grid resolution has the following behavior.
<P>

<B>Auto mode sticks at peak value</B>

is not set:
<DL COMPACT>
<DT><B></B>

<DD>
1) If using auto number of grids, set the resolution per grid and the
number of grids to optimize the visibility of data drawn on the chart.
Try to keep the number of grids between 1 and 7.
<DT><B></B>

<DD>
2) If using a fixed number of grids, set the resolution per grid to the
smallest value that draws data without clipping.
</DL>
<P>

<B>Auto mode sticks at peak value</B>

is set:
<DL COMPACT>
<DT><B></B>

<DD>
1) If using auto number of grids, set the resolution per grid such that
drawing the peak value encountered would require at least 5 grids.
<DT><B></B>

<DD>
2) If using a fixed number of grids, set the resolution per grid such
that the peak value encountered could be drawn without clipping.
This means the resolution per grid never decreases.
</DL>
<P>

All resolution per grid values are constrained to a set of values in
either a 1, 2, 5 sequence or a 1, 1.5, 2, 3, 5, 7 sequence.  If you set
<B>Auto mode sticks at peak value</B>

a manual
<B>Auto mode recalibrate</B>

may occasionally be required if the chart data has a wide dynamic range.
<P>
<P>
<A NAME="lbAJ">&nbsp;</A>
<H3>CPU Monitor</H3>

<P>

Data is plotted as a percentage.  In auto number of grids
mode, resolution is a fixed 20% per grid.  In fixed number of grids
mode, grid resolution is 100% divided by the number of grids.
<P>
<A NAME="lbAK">&nbsp;</A>
<H3>Proc Monitor</H3>

<P>

The krell shows process forks with a full scale value
of 10 forks.  The chart has a resolution of 10 forks/sec per grid
in auto number of grids mode and 50 forks/second maximum on the
chart in fixed number of grids mode.
The process load resolution per grid is best left at 1.0 for auto
number of grids, but can be set as high as 5 if you configure the
chart to have only 1 or 2 fixed grids.
<P>
<A NAME="lbAL">&nbsp;</A>
<H3>Net Monitor</H3>

<P>

<B>gkrellm</B>

is designed to display a chart for net interfaces which are
up, which means they are listed in the routing table (however, it is
possible in some cases to monitor unrouted interfaces).
One net interface may be linked to a timer button which can be used
to connect and disconnect from an ISP.
<P>

The timer button shows an off, standby, or on state by a distinctive
(color or shape) icon.
<DL COMPACT>
<DT>ppp<DD>
Standby state is while the modem phone line is locked while
ppp is connecting, and the on state is the ppp link connected.
The phone line lock is determined by the existence of the modem
lock file
<I>/var/lock/LCK..modem,</I>

which assumes pppd is using
<I>/dev/modem.</I>

However, if your pppd setup does not use
<I>/dev/modem,</I>

then you can configure an alternative with:
</DL>
<P>

<DL COMPACT><DT><DD>
<PRE>
ln  -s  /var/lock/LCK..ttySx   ~/.gkrellm2/LCK..modem
</PRE>

</DL>

<DL COMPACT>
<DT><DD>
where ttySx is the tty device your modem does use.  The ppp on
state is detected by the existence of
<I>/var/run/pppX.pid</I>

and the time stamp of this file is the base for the on line time.
<DT>ippp<DD>
The timer button standby state is not applicable to ISDN
interfaces that are always routed. The on state is ISDN on line
while the ippp interface is routed.  The on line timer is reset
at transitions from ISDN hangup state to on line state.
</DL>
<P>

For both ppp and ippp timer button links, the panel area of the
interface is always shown and the chart appears when the interface
is routed with the phone link connected or on line.
<P>

If the timer button is not linked to a net interface, then it can
be used as a push on / push off timer
<P>

Net monitors can have a label so that the interface can be
associated with the identity of the other end of the connection.
This is useful if you have several net connections or run multiple
remote
<B>gkrellm</B>

programs.  It can be easier to keep track of who is connected
to who.
<P>
<A NAME="lbAM">&nbsp;</A>
<H3>Mem and Swap Monitor</H3>

<P>

Here you are reading a ratio of total used to total available.
The amount of memory used indicated by the memory monitor is
actually a calculated &quot;used&quot; memory.  If you enter the
&quot;free&quot; command, you will see that most of your memory is almost
always used because the kernel uses large amounts for buffers
and cache.  Since the kernel can free a lot of this memory
as user process demand for memory goes up, a more realistic reading
of memory in use is obtained by subtracting the buffers and cached
memory from the kernel reported used.  This is shown in the free
command output in the &quot;-/+ buffers/cache&quot; line where a calculated
used amount has buffers and cached memory subtracted from the kernel
reported used memory, and a calculated free amount has the buffers
and cached memory added in.
<P>

While the memory meter always shows the calculated &quot;used&quot; memory,
the raw memory values total, shared, buffered, and cached may be
optionally displayed in the memory panel by entering an appropriate
format display string in the config.
<P>

Units:  All memory values have units of binary megabytes (MiB).
Memory sizes have historically been reported in these units because
memory arrays on silicon have always increased in size by multiples
of 2.  Add an address line to a memory chip and you double or quadruple
(a multiplexed address) the memory size.  A binary megabyte is
2^20 or 1048576.  Contrast this with units for other stats such
as disk capacities or net transfer rates where the proper units
are decimal megabytes or kilobytes.  Disk drive capacities do not
increase by powers of 2 and manufacturers do not use binary
units when reporting their sizes.  However, some of you may prefer
to see a binary disk drive capacity reported, so it is available
as an option.
<P>
<A NAME="lbAN">&nbsp;</A>
<H3>Internet Monitor</H3>

<P>

Displays TCP port connections and records historical port hits on a
minute or hourly chart.  Middle button click on an inet chart to
toggle between the minute and hourly displays.  There is a strip
below the minute or hour charts where marks are drawn for port
hits in second intervals.  Each inet krell also shows port hits
with a full scale range of 5 hits.  The left button toggle of extra
info displays current port connections.
<P>

For each internet monitor you can specify two labeled datasets with
one or two ports for each dataset.  There are two ports because some
internet ports are related and you might want to group them - for
example, the standard HTTP port is 80, but there is also a www web
caching service on port 8080.  So it makes sense to have a HTTP
monitor which combines data from both ports.  A possible common
configuration would be to create one inet monitor that monitors
HTTP hits plotted in one color and FTP hits in another.
To do this, setup in the Internet configuration tab:
<P>

<DL COMPACT><DT><DD>
<PRE>
HTTP  80 8080    FTP  21
</PRE>

</DL>

<P>

Or you could create separate monitors for HTTP and FTP.  Other
monitors might be SMTP on port 25 or NNTP on port 119.
<P>

If you check the &quot;Port0 - Port1 is a range&quot; button, then all of the
ports between the two entries will be monitored.  Clicking the
small button on the Inet panels will pop up a window listing the
currently connected port numbers and the host that is connected
to it.
<P>

<B>gkrellm</B>

samples TCP port activity once per second, so it is possible
for port hits lasting less than a second to be missed.
<P>
<A NAME="lbAO">&nbsp;</A>
<H3>File System Monitor</H3>

<P>

File system mount points can be selected to be monitored with a meter
that shows the ratio of blocks used to total blocks available.  Mounting
commands can be enabled for mount points in one of two ways:
<P>

If a mount point is in your
<I>/etc/fstab</I>

and you have mount permission
then
<B><A HREF="../man8/mount.8.php">mount</A></B>(8)

and
<B><A HREF="../man8/umount.8.php">umount</A></B>(8)

commands can be enabled and executed for that
mount point simply by checking the &quot;Enable /etc/fstab mounting&quot; option.
Mount table entries in
<I>/etc/fstab</I>

must have the &quot;user&quot; or &quot;owner&quot; option set
to grant this permission unless
<B>gkrellm</B>

is run as root.
For example, if you run
<B>gkrellm</B>

as a normal user and you want to be
able to mount your floppy, your
<I>/etc/fstab</I>

could have either of:
<P>

<DL COMPACT><DT><DD>
<PRE>
/dev/fd0 /mnt/floppy  ext2 user,noauto,rw,exec  0  0
/dev/fd0 /mnt/floppy  ext2 user,defaults  0  0
</PRE>

</DL>

<P>

If
<B>gkrellm</B>

is run as root or if you have
<B><A HREF="../man1/sudo.1.php">sudo</A></B>(1)

permission to run the
<B><A HREF="../man8/mount.8.php">mount</A></B>(8)

commands, then a custom mount command can be entered into the
&quot;mount command&quot; entry box.  A
<B><A HREF="../man8/umount.8.php">umount</A></B>(8)

command must also be entered if you
choose this method.  Example mount and umount entries using sudo:
<P>

<DL COMPACT><DT><DD>
<PRE>
sudo /bin/mount -t msdos /dev/fd0 /mnt/A
sudo /bin/umount /mnt/A
</PRE>

</DL>

<P>

Notes: the mount point specified in a custom mount command (/mnt/A in
this example) must be the same as entered in the &quot;Mount Point&quot; entry.
Also, you should have the NOPASSWD option set in
<I>/etc/sudoers</I>

for this.
<P>

File system monitors can be created as primary (always visible)
or secondary which can be hidden and then shown when they are of
interest.  For example, you might make primary file system monitors
for root, home, or user so they will be always visible, but make
secondary monitors for less frequently used mount points such as
floppy, zip, backup partitions, foreign file system types, etc.
Secondary FS monitors can also be configured to always be visible if they
are mounted by checking the &quot;Show if mounted&quot; option.   Using this
feature you can show the secondary group, mount a file system, and have
that FS monitor remain visible even when the secondary group is hidden.
A standard cdrom mount will show as 100% full but a monitor for it
could be created with mounting enabled just to have the
mount/umount convenience.
<P>

When the &quot;Ejectable&quot; option is selected for a file system, an eject
button will appear when the mouse enters the file system panel.  If you
are not using /etc/fstab mounting, a device file to eject will also need
to be entered.  Systems may have varying levels of support for this feature
ranging from none or basic using an ioctl() to full support using an eject
command to eject all its supported devices.   Linux and NetBSD use the
&quot;eject&quot; command while FreeBSD uses the &quot;cdcontrol&quot; command, so be sure
these commands are installed.
Most eject commands will also support closing a CDROM tray.  If they do,
you will be able to access this function by right clicking the eject button.
<P>
<A NAME="lbAP">&nbsp;</A>
<H3>Mail Monitor</H3>

<P>

Checks your mailboxes for unread mail. A mail reading program (MUA) can be
executed with a left mouse click on the mail monitor panel button, and
a mail notify (play a sound) program such as esdplay or artsplay can be
executed whenever the new mail count increases.  The mail panel envelope
decal may also be clicked to force an immediate mail check at any time.
<P>

<B>gkrellm</B>

is capable of checking mail from local mailbox types mbox, MH, and
maildir,  and from remote mailbox types POP3 and IMAP.
<P>

POP3 and IMAP checking can use non-standard port numbers and password
authentication protocols APOP (for POP3 only) or CRAM-MD5.  If supported
by the mail server, emote checking may be done over an SSL connection if
the &quot;Use SSL&quot; option is selected.
<P>

Before internal POP3 and IMAP checking was added, an external mail
fetch/check program could be set up to be executed periodically to
download or check remote POP3 or IMAP mail.  This method is still
available and must be used if you want
gkrellm to be able to
download remote mail to local mailboxes because the builtin checking
functions cannot download.
<P>
<A NAME="lbAQ">&nbsp;</A>
<H3>Battery Monitor</H3>

<P>

This meter will be available if a battery exists and will show battery
percentage life remaining.  A decal indicates if AC line is connected
or if the battery is in use.  If the data is available, time remaining
may be displayed as well as the percentage battery level. If the time
remaining is not available or is inaccurate, the Estimate Time option
may be selected to display a battery time to run or time to charge which
is calculated based on the current battery percent level, user supplied
typical battery times, and a default linear extrapolation model.
For charging, an exponential charge model may be selected.
<P>

A battery low level warning and alarm alert may be set.  If battery time
is not available from the OS and the estimate time mode is not set, the
alert units will be battery percent level.  Otherwise the alert units will
be battery time left in minutes.  If OS battery time is not available and the
estimate time mode is set when the alert is created, the alert will have
units of time left in minutes and the alert will automatically be destroyed
if the estimate time option is subsequently turned off.
<P>

If the OS reports multiple batteries, the alert will be a master alert
which is duplicated for each battery.
<P>
<A NAME="lbAR">&nbsp;</A>
<H3>CPU/Motherboard Sensors - Temperature, Voltages, and Fan RPM</H3>

<P>

For sensor monitoring on Linux you must have lm_sensors modules installed
in your running kernel or run a kernel &gt;= 2.6 with sysfs sensors configured.
Sensor temperatures can also be read from /proc/acpi/thermal_zone or
/proc/acpi/thermal.  When using lm_sensors, sensor data is read from
/proc/sys/dev/sensors and there is no linking to the lm_sensors libraries.
<P>

Similarly, Windows requires a MBM install:
<I><A HREF="http://mbm.livewiredev.com/.">http://mbm.livewiredev.com/.</A></I>

<P>

FreeBSD and NetBSD provide builtin sensor reporting for some sensor chips.
NetBSD uses the <A HREF="../man4/envsys.4.php">envsys</A>(4) interface and sensors reading is automatically
enabled if you have either a <A HREF="../man4/lm.4.php">lm</A>(4) or <A HREF="../man4/viaenv.4.php">viaenv</A>(4) chip configured in your kernel.
<P>

Temperature and fan sensor displays may be optionally located on the CPU or
Proc panels to save some vertical space while voltages are always displayed
on their own panel.  If you set up to monitor both a temperature and a fan
on a single CPU or Proc panel, they can be displayed optionally as an
alternating single display or as separate displays.  If separate, the fan
display will replace the panel label.  The configuration for this is under
the CPU and Proc config pages.
<P>

In the Setup page for the Sensors config you also enter any correction
factors and offsets for each of the sensors you are monitoring.  For Linux,
default values are automatically provided for many sensor chips, but if
they are not correct you should review the lm_sensors documentation.  See
below for an explanation of converting lm_sensor compute lines to
<B>gkrellm</B>

correction factors and offsets.  For Windows,
MBM internally handles the sensor corrections and no config entries should
be required.
<P>

<PRE>
Note for NetBSD users:
</PRE>

<DL COMPACT><DT><DD>
The current implementation of the sensor reading under NetBSD opens
/dev/sysmon and never closes it. Since that device does not support
concurrent accesses, you won't be able to run other apps such as
<A HREF="../man8/envstat.8.php">envstat</A>(8) while GKrellM is running.  This might change if this happens
to be an issue.
<P>

The reasons for this choice are a) efficiency (though it might be possible
to open/close /dev/sysmon each time a reading is needed without major
performance issue) and b) as of October 2001, there's a bug in the
<A HREF="../man4/envsys.4.php">envsys</A>(4) driver which sometimes causes deadlocks when processes try to
access simultaneously /dev/sysmon  (see NetBSD PR#14368). A (quick and
dirty) workaround for this is to monopolize the driver :)
</DL>

<P>
<A NAME="lbAS">&nbsp;</A>
<H3>CPU/Motherboard Temperatures</H3>

<P>

Most modern motherboards will not require setting temperature correction
factors and offsets other than the defaults.  However, for lm_sensors it
is necessary to have a correct &quot;set sensor&quot; line in
<I>/etc/sensors.conf</I>

if the temperature sensor type is other than the default thermistor.
If using Linux sysfs sensors, this sensor type would be set by writing to
a sysfs file.  For example, you might at boot set a sysfs temperature sensor
type with:
<P>

<DL COMPACT><DT><DD>
<PRE>
echo &quot;2&quot; &gt; /sys/bus/i2c/devices/0-0290/sensor2
</PRE>

</DL>

<P>

On the other hand, some older motherboards may need temperature calibration
by setting a correction factor and offset for each temperature sensor
because of factors such as variations in physical thermistor contact
with the CPU.  Unfortunately, this calibration may not be practical or
physically possible because it requires that somehow you can get a real
CPU temperature reading.  So, the calibration discussion which follows
should probably be considered an academic exercise that might give you
some good (or bad) ideas. If you have a recent motherboard, skip the
following.
<P>

Anyway, to do this calibration, take two real CPU temperature readings
corresponding to two sensor reported readings.   To get the real
readings, you can trust that your motherboard manufacturer has done
this calibration and is reporting accurate temperatures in the bios,
or you can put a temperature probe directly on your CPU case (and this
is where things get impractical).
<P>

Here is a hypothetical CPU calibration procedure.  Make sure
<B>gkrellm</B>

is configured with default factors of 1.0 and offsets of 0 and is reporting
temperatures in centigrade:
<P>

<DL COMPACT>
<DT>1 *<DD>
Power on the machine and read a real temperature T1 from the bios or
a temperature probe.  If reading from the bios, proceed with booting
the OS.  Now record a sensor temperature S1 as reported by
<B>gkrellm.</B>

<DT>2 *<DD>
Change the room temperature environment (turn off your AC or change
computer fan exhaust speed).  Now repeat step 1, this time recording
a real temperature T2 and
<B>gkrellm</B>

reported sensor temperature S2.
<DT>3 *<DD>
Now you can calculate the correction factor and offset you need
to enter into the Sensor configuration tab:
</DL>
<P>

<DL COMPACT><DT><DD>
<PRE>

From:

s - S1     t - T1
------  =  ------
S2 - S1    T2 - T1

         T2 - T1     S2*T1 - S1*T2
t  = s * -------  +  -------------
         S2 - S1         S2 - S1

So:

          T2 - T1                S2*T1 - S1*T2
factor =  -------      offset =  -------------
          S2 - S1                   S2 - S1

</PRE>

</DL>

<P>
<A NAME="lbAT">&nbsp;</A>
<H3>Voltage Sensor Corrections</H3>

<P>

You need to read this section only if you think the default voltage correction
factors and offsets are incorrect.  For Linux and lm_sensors and sysfs sensors
<BR>&nbsp;this&nbsp;would&nbsp;be&nbsp;if
<B>gkrellm</B>

does not know about your particular sensor chip.
For MBM with Windows, the default values should be correct.
<P>

Motherboard voltage measurements are made by a variety of sensor
chips which are capable of measuring a small positive voltage.
GKrellM can display these voltage values and can apply a correction
factor, offset, and for the negative voltages of some chips (lm80),
a level shifting reference voltage to the displayed voltage.
There are four cases to consider:
<P>

<DL COMPACT>
<DT>1 *<DD>
Low valued positive voltages may be directly connected to the input
pins of the sensor chip and therefore need no correction.  For these,
the correction factor should be 1.0 and the offset should be 0.
<DT>2 *<DD>
Higher valued positive voltages will be connected to the input pins
of the sensor chip through a 2 resistor attenuation circuit.  For these,
the correction factor will be a ratio of the resistor values and the
offset will be 0.
<DT>3 *<DD>
Negative voltages will be connected to the input pins of the sensor
through a 2 resistor attenuation circuit with one of the resistors
connected to a positive voltage to effect a voltage level shift.
For these (lm80), the correction factor and offset will be ratios of the
resistor values, and a reference voltage must be used.
<DT>4 *<DD>
Some sensor chips (w83782, lm78) are designed to handle negative inputs
without requiring an input resistor connected to a voltage reference.
For these, there will be a correction factor and a possible offset.
</DL>
<P>

<DL COMPACT><DT><DD>
<PRE>

For cases 2 and 3, the sensor chip input network looks like:

    Vs o----/\/\/---o-------------o Vin
             R1     |
                    o--/\/\/--o Vref
                        R2
</PRE>

</DL>

<P>

<DL COMPACT>
<DT>where,<DD>
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><I>Vs</I>

<DD>
is the motherboard voltage under measurement
<DT><I>Vin</I>

<DD>
is the voltage at the input pin of the sensor chip and therefore is
the voltage reading that will need correction.
<DT><I>Vref</I>

<DD>
is a level shifting voltage reference.  For case 2, Vref is ground
or zero.  For case 3, Vref will be one of the positive motherboard
voltages.
</DL>
</DL>

</DL>
<P>

<P>
The problem then is to compute correction factors and offsets as a function
of R1 and R2 so that GKrellM can display a computed motherboard voltage Vs
as a function of a measured voltage Vin.
<P>

Since sensor chip input pins are high impedance, current into the pins may
be assumed to be zero.  In that case, the current through R1 equals current
through R2, and we have:
<P>

<DL COMPACT><DT><DD>
<PRE>
    (Vs - Vin)/R1 = (Vin - Vref)/R2

Solving for Vs as a function of Vin:

    Vs = Vin * (1 + R1/R2)  -  (R1/R2) * Vref

So, the correction factor is:  1 + R1/R2
    the correction offset is:  - (R1/R2)
    Vref is specified in the config separately from
    the offset (for chips that need it).

</PRE>

</DL>

<P>

Fortunately there seems to be a standard set of resistor values used
for the various sensor chips which are documented in the lm_sensor
documentation.  The GKrellM sensor corrections are similar to the compute
lines you find with lm_sensors, with the difference that lm_sensors has an
expression evaluator which does not require that compute lines be simplified
to the single factor and offset required by GKrellM.  But you can easily
calculate the factor and offset.  For example, this lm_sensor compute line
for a case 2 voltage:
<P>

<DL COMPACT><DT><DD>
<PRE>
    compute in3 ((6.8/10)+1)*@ ,  @/((6.8/10)+1)

</PRE>

</DL>

<P>

yields a correction factor of ((6.8/10)+1) = 1.68
and an offset of zero.
<P>

Note that the second compute line expression is not relevant in GKrellM
because there is never any need to invert the voltage reading calculation.
Also, the compute line '@' symbol represents the Vin voltage.
<P>

A more complicated compute line for a case 3 voltage:
<P>

<DL COMPACT><DT><DD>
<PRE>

    compute in5 (160/35.7)*(@ - in0) + @, ...

can be rewritten:

    compute in5 (1 + 160/35.7)*@ - (160/35.7)*in0, ...

so the correction factor is  (1 + 160/35.7) = 5.48
and the correction offset is -(160/35.7) = -4.48
and the voltage reference Vref is in0
</PRE>

</DL>

<P>

Here is a table of correction factors and offsets based on some typical
compute line entries from /etc/sensors.conf:
<P>

<DL COMPACT><DT><DD>
<PRE>

       Compute line                 Factor  Offset  Vref
       -------------------------------------------------
lm80   in0 (24/14.7 + 1) * @        2.633     0       -
       in2 (22.1/30 + 1) * @        1.737     0       -
       in3 (2.8/1.9) * @            1.474     0       -
       in4 (160/30.1 + 1) * @       6.316     0       -
       in5 (160/35.7)*(@-in0) + @   5.482    -4.482  in0
       in6 (36/16.2)*(@-in0) + @    3.222    -2.222  in0

LM78   in3 ((6.8/10)+1)*@           1.68      0       -
       in4 ((28/10)+1)*@            3.8       0       -
       in5 -(210/60.4)*@           -3.477     0       -
       in6 -(90.9/60.4)*@          -1.505     0       -

w83782 in5 (5.14 * @) - 14.91       5.14    -14.91    -
       in6 (3.14 * @) -  7.71       3.14     -7.71    -

</PRE>

</DL>

<P>
<A NAME="lbAU">&nbsp;</A>
<H3>Command launching</H3>

<P>

Many monitors can be set up to launch a command when you click on
the monitor label.  When a command is configured for a monitor, its
label is converted into a button which becomes visible when the mouse
enters the panel or meter area of the label.  If the command is a
console command (doesn't have a graphical user interface), then
the command must be run in a terminal window such as xterm, eterm,
or Gnome terminal.  For example running the &quot;top&quot; command would take:
<DL COMPACT>
<DT>xterm -e top<DD>
</DL>
<P>

You can use the command launching feature to run commands related to
monitoring functions, or you may use it to have a convenient launch
for any command.  Since
<B>gkrellm</B>

is usually made sticky, you can have
easy access to several frequently used commands from any desktop.
This is intended to be a convenience and a way to maximize utilization
of screen real estate and not a replacement for more full featured
command launching from desktops such as Gnome or KDE or others.
Some launch ideas for some monitors could be:
<DL COMPACT>
<DT><I>calendar:</I>

<DD>
gnomecal, evolution, or ical
<DT><I>CPU:</I>

<DD>
xterm -e top or gps or gtop
<DT><I>inet:</I>

<DD>
gftp or xterm -e ftpwho
<DT><I>net:</I>

<DD>
mozilla, galeon, skipstone, or xterm -e slrn -C-
</DL>
<P>

And so on... Tooltips can be set up for these commands.
<P>
<A NAME="lbAV">&nbsp;</A>
<H3>Alerts</H3>

<P>

Most monitors can have alerts configured to give warnings and alarms
for data readings which range outside of configurable limits.  Where
useful, a delay of the alert trigger can be configured.  A warning or
alarm consists of an attention grabbing decal appearing and an optional
command being executed.
For most monitors the command may contain the
same substitution variables which are available for display in the
chart or panel label format strings and are documented on configuration
Info pages.  Additionally, the hostname may be embedded in the command
with the $H substitution variable.
<P>

If you have festival installed, either a warn or alarm command
could be configured to speak something.  For example a CPU temperature
alert warn command could just speak the current temperature with:
<PRE>

    sh -c &quot;echo warning C P U is at $s degrees | esddsp festival --tts&quot;

</PRE>

Assuming you have esd running.
<P>
<A NAME="lbAW">&nbsp;</A>
<H2>THEMES</H2>

<P>

A theme is a directory containing image files and a
<I>gkrellmrc</I>

configuration file.  The theme directory may be installed in
several locations:
<P>

<DL COMPACT><DT><DD>
<PRE>
~/.gkrellm2/themes
/usr/local/share/gkrellm2/themes
/usr/share/gkrellm2/themes
</PRE>

</DL>

<P>

For compatibility with Gtk themes, a
<B>gkrellm</B>

theme may also be installed as:
<P>

<DL COMPACT><DT><DD>
<PRE>
~/.themes/THEME_NAME/gkrellm2
/usr/share/themes/THEME_NAME/gkrellm2
</PRE>

</DL>

<P>

Finally, a theme you simply want to check out can be untarred anywhere and
used by running:
<P>

<DL COMPACT><DT><DD>
<PRE>
gkrellm -t path_to_theme
</PRE>

</DL>

<P>

If you are interested in writing a theme, go to the Themes page
at
<I><A HREF="http://www.gkrellm.net">http://www.gkrellm.net</A></I>

and there you will find a Theme making reference.
<P>
<P>
<A NAME="lbAX">&nbsp;</A>
<H2>PLUGINS</H2>

<P>

<B>gkrellm</B>

tries to load all plugins (shared object files ending in .so)
it finds in your plugin directory
<I>~/.gkrellm2/plugins.</I>

The directories
<I>/usr/local/lib/gkrellm2/plugins</I>

and
<I>/usr/lib/gkrellm2/plugins</I>

are also searched for plugins to install.
<P>

Some plugins may be available only as source files and they will
have to be compiled before installation.  There should be instructions
for doing this with each plugin that comes in source form.
<P>

If you are interested in writing a plugin, go to the Plugins page
at
<I><A HREF="http://www.gkrellm.net">http://www.gkrellm.net</A></I>

and there you will find a Plugin programmers reference.
<P>
<P>
<A NAME="lbAY">&nbsp;</A>
<H2>CLIENT/SERVER</H2>

When a local
<B>gkrellm</B>

runs in client mode and connects to a remote
<B>gkrellmd</B>

server all builtin monitors collect
their data from the server.  However, the client
<B>gkrellm</B>

process is running
on the local machine, so any enabled plugins will run in the local
context (Flynn is an exception to this since it derives its data from
the builtin CPU monitor).  Also, any command launching will run commands
on the local machine.
<P>
<A NAME="lbAZ">&nbsp;</A>
<H2>FILES</H2>

<DL COMPACT>
<DT><I>~/.gkrellm2</I>

<DD>
User gkrellm directory where are located configuration files, user's plugins
and user's themes.
<DT><I>~/.gkrellm2/plugins</I>

<DD>
User plugin directory.
<DT><I>/usr/lib/gkrellm2/plugins</I>

<DD>
System wide plugin directory.
<DT><I>/usr/local/lib/gkrellm2/plugins</I>

<DD>
Local plugin directory.
<DT><I>~/.gkrellm2/themes</I>

<DD>
User theme directory.
<DT><I>~/.themes/THEME_NAME/gkrellm2</I>

<DD>
User theme packaged as part of a user Gtk theme.
<DT><I>/usr/share/gkrellm2/themes</I>

<DD>
System wide theme directory.
<DT><I>/usr/local/share/gkrellm2/themes</I>

<DD>
Local theme directory.
<DT><I>/usr/share/themes/THEME_NAME/gkrellm2</I>

<DD>
System wide theme packaged as part of a system wide Gtk theme.
<P>
</DL>
<A NAME="lbBA">&nbsp;</A>
<H2>AUTHORS</H2>

<P>
Bill Wilson &lt;<A HREF="mailto:bill@gkrellm.net">bill@gkrellm.net</A>&gt;.
<A HREF="http://www.gkrellm.net/">http://www.gkrellm.net/</A>
<P>
<A NAME="lbBB">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="../man5/fstab.5.php">fstab</A></B>(5),

<B><A HREF="../man1/sudo.1.php">sudo</A></B>(1),

<B><A HREF="../man8/mount.8.php">mount</A></B>(8),

<B><A HREF="../man8/pppd.8.php">pppd</A></B>(8),

<B><A HREF="../man8/umount.8.php">umount</A></B>(8)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DL>
<DT><A HREF="#lbAE">FEATURES</A><DD>
<DT><A HREF="#lbAF">USER INTERFACE</A><DD>
</DL>
<DT><A HREF="#lbAG">OPTIONS</A><DD>
<DT><A HREF="#lbAH">BUILTIN MONITORS</A><DD>
<DL>
<DT><A HREF="#lbAI">Charts</A><DD>
<DT><A HREF="#lbAJ">CPU Monitor</A><DD>
<DT><A HREF="#lbAK">Proc Monitor</A><DD>
<DT><A HREF="#lbAL">Net Monitor</A><DD>
<DT><A HREF="#lbAM">Mem and Swap Monitor</A><DD>
<DT><A HREF="#lbAN">Internet Monitor</A><DD>
<DT><A HREF="#lbAO">File System Monitor</A><DD>
<DT><A HREF="#lbAP">Mail Monitor</A><DD>
<DT><A HREF="#lbAQ">Battery Monitor</A><DD>
<DT><A HREF="#lbAR">CPU/Motherboard Sensors - Temperature, Voltages, and Fan RPM</A><DD>
<DT><A HREF="#lbAS">CPU/Motherboard Temperatures</A><DD>
<DT><A HREF="#lbAT">Voltage Sensor Corrections</A><DD>
<DT><A HREF="#lbAU">Command launching</A><DD>
<DT><A HREF="#lbAV">Alerts</A><DD>
</DL>
<DT><A HREF="#lbAW">THEMES</A><DD>
<DT><A HREF="#lbAX">PLUGINS</A><DD>
<DT><A HREF="#lbAY">CLIENT/SERVER</A><DD>
<DT><A HREF="#lbAZ">FILES</A><DD>
<DT><A HREF="#lbBA">AUTHORS</A><DD>
<DT><A HREF="#lbBB">SEE ALSO</A><DD>
</DL>

</div>

<div id="disqus_thread"></div>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=linuxmanpages">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
<div id="footer"><div class="littletext"> LinuxManPages.com &copy; <a class="white"  href="http://www.name.com">Name.com</a>&nbsp;&nbsp;&nbsp;Links: <!--<a class='white' href='http://www.earthsearch.net'>geographic information</a> |-->
<a class='white' href='http://www.who.is'>who.is search</a> |
<a class='white' href='http://www.bluerider.com'>dictionary</a> |
<a class='white' href='http://www.tld.io' class='small'>ccTLD information</a> 
</div></div>
</div>




</body>
</html>
