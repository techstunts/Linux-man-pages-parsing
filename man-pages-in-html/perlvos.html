
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>PERLVOS</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="/global/main.css" title="default">
</head>

<body>



<div id="container">


<div id="content">

<div id='catHeader'><table width='100%'><tr><td>
<H1>PERLVOS</H1>
Section: Perl Programmers Reference Guide (1)<BR>Updated: 2004-04-23<BR>
</td><td align='right' valign='bottom'><div class='ad_header_right'></div></td></tr></table></div></div>
<div id='categories'>
<div class='ad_man_right'>
</div>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

README.vos - Perl for Stratus VOS
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>
This file contains notes for building perl on the Stratus <FONT SIZE="-1">VOS</FONT>
operating system.  Perl is a scripting or macro language that is
popular on many systems.  See perlbook for a number of good
books on Perl.
<P>

These are instructions for building Perl from source.  Most people can
simply download a pre-compiled distribution from the <FONT SIZE="-1">VOS</FONT> anonymous <FONT SIZE="-1">FTP</FONT>
site.  If you are running <FONT SIZE="-1">VOS</FONT> Release 14.2.0 or earlier, download Perl
from <A HREF="ftp://ftp.stratus.com/pub/vos/posix/alpha/alpha.php">ftp://ftp.stratus.com/pub/vos/posix/alpha/alpha.html</A>  If you are
running <FONT SIZE="-1">VOS</FONT> Release 14.3.0 or later, download Perl from
<A HREF="ftp://ftp.stratus.com/pub/vos/posix/ga/ga.php">ftp://ftp.stratus.com/pub/vos/posix/ga/ga.html</A>  Instructions for
unbundling the Perl distribution file are at
<A HREF="ftp://ftp.stratus.com/pub/vos/utility/utility.php">ftp://ftp.stratus.com/pub/vos/utility/utility.html</A>
<P>

If you are running <FONT SIZE="-1">VOS</FONT> Release 14.4.1 or later, you can obtain a
pre-compiled, supported copy of perl by purchasing Release 2.0.1
(or later) of the <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">GNU</FONT> C<FONT SIZE="-2">++</FONT> and <FONT SIZE="-1">GNU</FONT> Tools product from Stratus
Technologies.
<A NAME="lbAD">&nbsp;</A>
<H2>Multiple methods to build perl for <FONT SIZE="-1">VOS</FONT></H2>

<A NAME="ixAAD"></A>
If you elect to build perl from its source code, you have several
different ways that you can build perl.  The method that you use
depends on the version of <FONT SIZE="-1">VOS</FONT> that you are using and on the
architecture of your Stratus hardware platform.
<DL COMPACT>
<DT>1<DD>
<A NAME="ixAAE"></A>
If you have a Stratus <FONT SIZE="-1">XA2000</FONT> (Motorola 68k-based) platform, you
must build perl using the alpha version of <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">POSIX</FONT> support and
using the <FONT SIZE="-1">VOS</FONT> Standard C Cross-compiler.  You must build perl on
<FONT SIZE="-1">VOS</FONT> Release 14.1.0 (or later) on an <FONT SIZE="-1">XA/R</FONT> or Continuum platform.


<P>


This version of perl is properly called ``miniperl'' because it
does not contain the complete perl functionality.


<P>


You must build perl with the compile_perl.cm command macro found
in the vos subdirectory.
<DT>2<DD>
<A NAME="ixAAF"></A>
If you have a Stratus <FONT SIZE="-1">XA/R</FONT> (Intel i860-based) platform, you must
build perl using the alpha version of <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">POSIX</FONT> support and using
the <FONT SIZE="-1">VOS</FONT> Standard C compiler or cross-compiler.  You must build
perl on <FONT SIZE="-1">VOS</FONT> Release 14.1.0 (or later) on an <FONT SIZE="-1">XA/R</FONT> or Continuum
platform.


<P>


This version of perl is properly called ``miniperl'' because it
does not contain the complete perl functionality.


<P>


You must build perl with the compile_perl.cm command macro found
in the vos subdirectory.
<DT>3<DD>
<A NAME="ixAAG"></A>
If you have a Stratus Continuum (PA-RISC-based) platform that is
running a version of <FONT SIZE="-1">VOS</FONT> earlier than <FONT SIZE="-1">VOS</FONT> 14.3.0, you must build
perl using the alpha version of <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">POSIX</FONT> support and using the
<FONT SIZE="-1">VOS</FONT> Standard C compiler or cross-compiler.  You must build perl
on <FONT SIZE="-1">VOS</FONT> Release 14.1.0 (or later) on an <FONT SIZE="-1">XA/R</FONT> or Continuum
platform.


<P>


This version of perl is properly called ``miniperl'' because it
does not contain the complete perl functionality.


<P>


You must build perl with the compile_perl.cm command macro found
in the vos subdirectory.
<DT>4<DD>
<A NAME="ixAAH"></A>
If you have a Stratus Continuum (PA-RISC-based) platform that is
running <FONT SIZE="-1">VOS</FONT> Release 14.3.0 through <FONT SIZE="-1">VOS</FONT> Release 14.4.1, you must
build perl using the generally-available version of <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">POSIX</FONT>
support, and using either the <FONT SIZE="-1">VOS</FONT> Standard C compiler or the <FONT SIZE="-1">VOS</FONT>
<FONT SIZE="-1">GNU</FONT> C compiler.  You must build perl on <FONT SIZE="-1">VOS</FONT> Release 14.3.0 (or
later) on a Continuum platform.


<P>


This version of perl is properly called ``miniperl'' because it
does not contain the complete perl functionality.


<P>


You must build perl with the compile_perl.cm command macro found
in the vos subdirectory.
<DT>5<DD>
<A NAME="ixAAI"></A>
If you have a Stratus Continuum (PA-RISC-based) platform that is
running <FONT SIZE="-1">VOS</FONT> Release 14.5.0 or later, you can either use the
previous method to build ``miniperl'' or you can build ``full
perl'', which contains the complete functionality of perl.  I
strongly recommend that you build full perl.  To build full
perl, you must use the generally-available version of <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">POSIX</FONT>
support.  You must use the <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">GNU</FONT> C compiler and the <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">GNU</FONT>
C/C<FONT SIZE="-2">++</FONT> and <FONT SIZE="-1">GNU</FONT> Tools Release 2.0.1 (or later) product.  You must
build full perl on <FONT SIZE="-1">VOS</FONT> Release 14.5.0 (or later) on a Continuum
platform.


<P>


You must build full perl with the compile_full_perl.cm command
macro found in the vos subdirectory.
</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>Stratus <FONT SIZE="-1">POSIX</FONT> Support</H2>

<A NAME="ixAAJ"></A>
Note that there are two different implementations of <FONT SIZE="-1">POSIX</FONT>.1
support on <FONT SIZE="-1">VOS</FONT>.  There is an alpha version of <FONT SIZE="-1">POSIX</FONT> that is
available from the Stratus anonymous ftp site
( <A HREF="ftp://ftp.stratus.com/pub/vos/posix/alpha/alpha.php">ftp://ftp.stratus.com/pub/vos/posix/alpha/alpha.html</A> ).  There
is a generally-available version of <FONT SIZE="-1">POSIX</FONT> that comes with <FONT SIZE="-1">VOS</FONT>
Release 14.3.0 or higher.  This port of <FONT SIZE="-1">POSIX</FONT> will compile and
bind with either version of <FONT SIZE="-1">POSIX</FONT>.
<P>

Most of the Perl features should work on <FONT SIZE="-1">VOS</FONT> regardless of which
version of <FONT SIZE="-1">POSIX</FONT> that you are using.  However, the alpha version
of <FONT SIZE="-1">POSIX</FONT> is missing a number of key functions, and therefore any
attempt by perl.pm to call the following unimplemented <FONT SIZE="-1">POSIX</FONT>
functions will result in an error message and an immediate and
fatal call to the <FONT SIZE="-1">VOS</FONT> debugger.  They are ``dup'', ``fork'', and
``waitpid''.  The lack of these functions prevents you from
starting <FONT SIZE="-1">VOS</FONT> commands and grabbing their output in perl.  The
workaround is to run the commands outside of perl, then have perl
process the output file.  These functions are all available in
the generally-available version of <FONT SIZE="-1">POSIX</FONT>.
<A NAME="lbAF">&nbsp;</A>
<H2>INSTALLING PERL IN VOS</H2>

<A NAME="ixAAK"></A>
<A NAME="lbAG">&nbsp;</A>
<H2>Compiling Perl 5 on <FONT SIZE="-1">VOS</FONT></H2>

<A NAME="ixAAL"></A>
Before you can build Perl 5 on <FONT SIZE="-1">VOS</FONT>, you need to have or acquire the
following additional items.
<DL COMPACT>
<DT>1<DD>
<A NAME="ixAAM"></A>
The <FONT SIZE="-1">VOS</FONT> Standard C Compiler (or the <FONT SIZE="-1">VOS</FONT> Standard C
Cross-Compiler) and the <FONT SIZE="-1">VOS</FONT> C Runtime.  If you are using
the generally-available version of <FONT SIZE="-1">POSIX</FONT> support, you may
instead use the <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">GNU</FONT> C/C<FONT SIZE="-2">++</FONT> Compiler.  These are
standard Stratus products.
<DT>2<DD>
<A NAME="ixAAN"></A>
Either the <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">OS</FONT> <FONT SIZE="-1">TCP/IP</FONT> or <FONT SIZE="-1">STCP</FONT> product set.  If you are
building with the alpha version of <FONT SIZE="-1">POSIX</FONT> you need the <FONT SIZE="-1">OS</FONT>
<FONT SIZE="-1">TCP/IP</FONT> product set.  If you are building with the
generally-available version of <FONT SIZE="-1">POSIX</FONT> you need the <FONT SIZE="-1">STCP</FONT>
product set.  These are standard Stratus products.
<DT>3<DD>
<A NAME="ixAAO"></A>
Either the alpha or generally-available version of the <FONT SIZE="-1">VOS</FONT>
<FONT SIZE="-1">POSIX</FONT>.1 environment.


<P>


The alpha version of <FONT SIZE="-1">POSIX</FONT>.1 support is available on the
Stratus <FONT SIZE="-1">FTP</FONT> site.  Login anonymously to <A HREF="ftp://ftp.stratus.com">ftp.stratus.com</A> and
get the file /pub/vos/posix/alpha/posix.save.evf.gz in
binary file-transfer mode.  Or use the Uniform Resource
Locator (<FONT SIZE="-1">URL</FONT>)
<A HREF="ftp://ftp.stratus.com/pub/vos/posix/alpha/posix.save.evf.gz">ftp://ftp.stratus.com/pub/vos/posix/alpha/posix.save.evf.gz</A> from
your web browser.  Instructions for unbundling this file
are at <A HREF="ftp://ftp.stratus.com/pub/vos/utility/utility.php">ftp://ftp.stratus.com/pub/vos/utility/utility.html</A>
This is <FONT SIZE="-1">NOT</FONT> a standard Stratus product.


<P>


In <FONT SIZE="-1">VOS</FONT> Release 14.3.0, the generally-available version of
<FONT SIZE="-1">POSIX</FONT>.1 support is bundled with the <FONT SIZE="-1">VOS</FONT> Standard C compiler
(or Standard C Cross-Compiler).  In <FONT SIZE="-1">VOS</FONT> Release 14.4.0 or
higher, it is also bundled with the <FONT SIZE="-1">VOS</FONT> C Runtime.  These
are standard Stratus products.
<DT>4<DD>
<A NAME="ixAAP"></A>
You must compile this version of Perl 5 on <FONT SIZE="-1">VOS</FONT> Release
14.1.0 or higher because some of the perl source files
contain more than 32,767 source lines.  Due to <FONT SIZE="-1">VOS</FONT>
release-compatibility rules, this port of perl may not
execute on <FONT SIZE="-1">VOS</FONT> Release 12 or earlier.
<DT>5<DD>
<A NAME="ixAAQ"></A>
If you are using the generally-available version of <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">POSIX</FONT>
support, then you should also acquire the <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">GNU</FONT> C/C<FONT SIZE="-2">++</FONT> Compiler
and <FONT SIZE="-1">GNU</FONT> Tools product.  When perl is built with this version of
<FONT SIZE="-1">POSIX</FONT> support, it assumes that it can find ``bash'', ``sed'' and
other POSIX-compatible commands in the directory
/system/gnu_library/bin.
</DL>
<P>

To build perl using the supplied <FONT SIZE="-1">VOS</FONT> command macros, change to
the ``vos'' subdirectory and type the command ``compile_perl
-processor X'', where X is the processor type (mc68020, i80860,
pa7100, pa8000) that you wish to use.  Note that the
generally-available version of <FONT SIZE="-1">POSIX</FONT>.1 support is not available
for the mc68020 or i80860 processors.
<P>

Use the ``-version alpha'' control argument to build perl with
the alpha version of <FONT SIZE="-1">POSIX</FONT> support, and use the ``-version
ga'' control argument to build it with the
generally-available version of <FONT SIZE="-1">POSIX</FONT>.  The default is ``ga''.
<P>

Use the ``-compiler cc'' control argument to build perl with
the <FONT SIZE="-1">VOS</FONT> Standard C compiler.  Use the ``-compiler gcc''
control argument to build it with the <FONT SIZE="-1">GNU</FONT> <FONT SIZE="-1">GCC</FONT> compiler.  The
default is ``cc''.
<P>

You must have purchased the <FONT SIZE="-1">VOS</FONT> Standard C Cross Compiler in
order to compile perl for a processor type that is different
from the processor type of the module.
<P>

Note that code compiled for the pa7100 processor type can
execute on the <FONT SIZE="-1">PA7100</FONT>, <FONT SIZE="-1">PA8000</FONT>, <FONT SIZE="-1">PA8500</FONT> and <FONT SIZE="-1">PA8600</FONT> processors, and
that code compiled for the pa8000 processor type can execute on
the <FONT SIZE="-1">PA8000</FONT>, <FONT SIZE="-1">PA8500</FONT> and <FONT SIZE="-1">PA8600</FONT> processors.
<P>

To build full perl using the supplied Configure script and
makefiles, change to the ``vos'' subdirectory and type the command
``compile_full_perl'' or ``start_process compile_full_perl''.  This
will configure, build, and test perl.
<A NAME="lbAH">&nbsp;</A>
<H2>Installing Perl 5 on <FONT SIZE="-1">VOS</FONT></H2>

<A NAME="ixAAR"></A>
<DL COMPACT>
<DT>1<DD>
<A NAME="ixAAS"></A>
If you have built perl using the Configure script, ensure that
you have modify permission to <TT>&quot;&gt;system&gt;ported&quot;</TT> and type


<P>




<PRE>
     gmake install

</PRE>


<DT>2<DD>
<A NAME="ixAAT"></A>
If you have built perl using any of the other methods, type


<P>




<PRE>
     install_perl -processor PROCESSOR -name NAME

</PRE>




<P>


where <FONT SIZE="-1">PROCESSOR</FONT> is mc68020, i80860, pa7100, or pa8000, as
appropriate, and <FONT SIZE="-1">NAME</FONT> is perl or perl5, according to which name
you wish to use.


<P>


This command macro will install perl and all of its related
files in the proper directories.
<DT>3<DD>
<A NAME="ixAAU"></A>
While there are currently no architecture-specific
extensions or modules distributed with perl, the following
directories can be used to hold such files:


<P>




<PRE>
     &gt;system&gt;ported&gt;lib&gt;perl5&gt;5.8.0&gt;68k
     &gt;system&gt;ported&gt;lib&gt;perl5&gt;5.8.0&gt;860
     &gt;system&gt;ported&gt;lib&gt;perl5&gt;5.8.0&gt;7100
     &gt;system&gt;ported&gt;lib&gt;perl5&gt;5.8.0&gt;8000

</PRE>


<DT>4<DD>
<A NAME="ixAAV"></A>
Site-specific perl extensions and modules can be installed in one of
two places.  Put architecture-independent files into:


<P>




<PRE>
     &gt;system&gt;ported&gt;lib&gt;perl5&gt;site_perl&gt;5.8.0

</PRE>




<P>


Put site-specific architecture-dependent files into one of the
following directories:


<P>




<PRE>
     &gt;system&gt;ported&gt;lib&gt;perl5&gt;site_perl&gt;5.8.0&gt;68k
     &gt;system&gt;ported&gt;lib&gt;perl5&gt;site_perl&gt;5.8.0&gt;860
     &gt;system&gt;ported&gt;lib&gt;perl5&gt;site_perl&gt;5.8.0&gt;7100
     &gt;system&gt;ported&gt;lib&gt;perl5&gt;site_perl&gt;5.8.0&gt;8000

</PRE>


<DT>5<DD>
<A NAME="ixAAW"></A>
You can examine the <TT>@INC</TT> variable from within a perl program
to see the order in which Perl searches these directories.
</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>USING PERL IN VOS</H2>

<A NAME="ixAAX"></A>
<A NAME="lbAJ">&nbsp;</A>
<H2>Unimplemented Features of Perl on <FONT SIZE="-1">VOS</FONT></H2>

<A NAME="ixAAY"></A>
If perl is built with the alpha version of <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">POSIX</FONT>.1 support
and if it attempts to call an unimplemented <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">POSIX</FONT>.1
function, it will print a fatal error message and enter the <FONT SIZE="-1">VOS</FONT>
debugger.  This error is not recoverable.  See vos_dummies.c for
a list of the unimplemented <FONT SIZE="-1">POSIX</FONT>.1 functions.  To see what
functions are unimplemented and what the error message looks
like, compile and execute ``test_vos_dummies.c''.
<A NAME="lbAK">&nbsp;</A>
<H2>Restrictions of Perl on <FONT SIZE="-1">VOS</FONT></H2>

<A NAME="ixAAZ"></A>
This port of Perl version 5 to <FONT SIZE="-1">VOS</FONT> prefers Unix-style,
slash-separated pathnames over VOS-style greater-than-separated
pathnames.  VOS-style pathnames should work in most contexts, but
if you have trouble, replace all greater-than characters by slash
characters.  Because the slash character is used as a pathname
delimiter, Perl cannot process <FONT SIZE="-1">VOS</FONT> pathnames containing a slash
character in a directory or file name; these must be renamed.
<P>

This port of Perl also uses Unix-epoch date values internally.
As long as you are dealing with <FONT SIZE="-1">ASCII</FONT> character string
representations of dates, this should not be an issue.  The
supported epoch is January 1, 1980 to January 17, 2038.
<P>

See the file pod/perlport.pod for more information about the <FONT SIZE="-1">VOS</FONT>
port of Perl.
<A NAME="lbAL">&nbsp;</A>
<H2>Handling of underflow and overflow</H2>

<A NAME="ixABA"></A>
Prior to <FONT SIZE="-1">VOS</FONT> Release 14.7.0, <FONT SIZE="-1">VOS</FONT> does not support automatically
mapping overflowed floating-point values to +infinity, nor
automatically mapping underflowed floating-point values to zero,
unlike many other platforms.  The Perl pack function has been
modified to perform such mapping in software on <FONT SIZE="-1">VOS</FONT>.  Performing
other floating-point computations that underflow or overflow
will probably result in <FONT SIZE="-1">SIGFPE</FONT>.  Don't push your luck.
<P>

As of <FONT SIZE="-1">VOS</FONT> Release 14.7.0, the <FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">POSIX</FONT> runtime sets up the
PA-RISC hardware floating-point status register so that the
overflow and underflow exceptions do not trap, but instead
automatically convert the result to infinity or zero, as
appropriate.  As of this writing, there are still floating-point
operations that can trap, for example, subtracting two infinite
values.  This is recorded as suggestion posix-1022, which is not
yet fixed.
<A NAME="lbAM">&nbsp;</A>
<H2>TEST STATUS</H2>

<A NAME="ixABB"></A>
When Perl 5.8.3 is built using the native build process on <FONT SIZE="-1">VOS</FONT>
Release 14.7.0 and <FONT SIZE="-1">GNU</FONT> C<FONT SIZE="-2">++</FONT>/GNU Tools 2.0.2a, all but three
attempted tests either pass or result in <FONT SIZE="-1">TODO</FONT> (ignored)
failures.  The tests that fail are:
<P>

t/io/tell.t, test 28
t/op/pack.t, test 39
lib/Net/ing/t/450_service.t, test 8
<A NAME="lbAN">&nbsp;</A>
<H2>SUPPORT STATUS</H2>

<A NAME="ixABC"></A>
I'm offering this port ``as is''.  You can ask me questions, but I
can't guarantee I'll be able to answer them.  There are some
excellent books available on the Perl language; consult a book
seller.
<P>

If you want a supported version of perl for <FONT SIZE="-1">VOS</FONT>, purchase the
<FONT SIZE="-1">VOS</FONT> <FONT SIZE="-1">GNU</FONT> C<FONT SIZE="-2">++</FONT> and <FONT SIZE="-1">GNU</FONT> Tools Release 2.0.1 (or later) product from
Stratus Technologies, along with a support contract (or from
anyone else who will sell you support).
<A NAME="lbAO">&nbsp;</A>
<H2>AUTHOR</H2>

<A NAME="ixABD"></A>
Paul Green (<A HREF="mailto:Paul.Green@stratus.com">Paul.Green@stratus.com</A>)
<A NAME="lbAP">&nbsp;</A>
<H2>LAST UPDATE</H2>

<A NAME="ixABE"></A>
January 15, 2004
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">Multiple methods to build perl for <FONT SIZE="-1">VOS</FONT></A><DD>
<DT><A HREF="#lbAE">Stratus <FONT SIZE="-1">POSIX</FONT> Support</A><DD>
<DT><A HREF="#lbAF">INSTALLING PERL IN VOS</A><DD>
<DT><A HREF="#lbAG">Compiling Perl 5 on <FONT SIZE="-1">VOS</FONT></A><DD>
<DT><A HREF="#lbAH">Installing Perl 5 on <FONT SIZE="-1">VOS</FONT></A><DD>
<DT><A HREF="#lbAI">USING PERL IN VOS</A><DD>
<DT><A HREF="#lbAJ">Unimplemented Features of Perl on <FONT SIZE="-1">VOS</FONT></A><DD>
<DT><A HREF="#lbAK">Restrictions of Perl on <FONT SIZE="-1">VOS</FONT></A><DD>
<DT><A HREF="#lbAL">Handling of underflow and overflow</A><DD>
<DT><A HREF="#lbAM">TEST STATUS</A><DD>
<DT><A HREF="#lbAN">SUPPORT STATUS</A><DD>
<DT><A HREF="#lbAO">AUTHOR</A><DD>
<DT><A HREF="#lbAP">LAST UPDATE</A><DD>
</DL>

</div>






</div>




</body>
</html>
