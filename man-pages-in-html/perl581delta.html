
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>PERL581DELTA</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="/global/main.css" title="default">
</head>

<body>



<div id="container">


<div id="content">

<div id='catHeader'><table width='100%'><tr><td>
<H1>PERL581DELTA</H1>
Section: Perl Programmers Reference Guide (1)<BR>Updated: 2004-04-23<BR>
</td><td align='right' valign='bottom'><div class='ad_header_right'></div></td></tr></table></div></div>
<div id='categories'>
<div class='ad_man_right'>
</div>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

perl581delta - what is new for perl v5.8.1
<A NAME="lbAC">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAC"></A>
This document describes differences between the 5.8.0 release and
the 5.8.1 release.
<P>

If you are upgrading from an earlier release such as 5.6.1, first read
the perl58delta, which describes differences between 5.6.0 and
5.8.0.
<P>

In case you are wondering about 5.6.1, it was bug-fix-wise rather
identical to the development release 5.7.1.  Confused?  This timeline
hopefully helps a bit: it lists the new major releases, their maintenance
releases, and the development releases.
<P>



<PRE>
          New     Maintenance  Development

</PRE>


<P>



<PRE>
          5.6.0                             2000-Mar-22
                               5.7.0        2000-Sep-02
                  5.6.1                     2001-Apr-08
                               5.7.1        2001-Apr-09
                               5.7.2        2001-Jul-13
                               5.7.3        2002-Mar-05
          5.8.0                             2002-Jul-18
                  5.8.1                     2003-Sep-25

</PRE>


<A NAME="lbAD">&nbsp;</A>
<H2>Incompatible Changes</H2>

<A NAME="ixAAD"></A>
<A NAME="lbAE">&nbsp;</A>
<H2>Hash Randomisation</H2>

<A NAME="ixAAE"></A>
Mainly due to security reasons, the ``random ordering'' of hashes
has been made even more random.  Previously while the order of hash
elements from <I>keys()</I>, <I>values()</I>, and <I>each()</I> was essentially random,
it was still repeatable.  Now, however, the order varies between
different runs of Perl.
<P>

<B>Perl has never guaranteed any ordering of the hash keys</B>, and the
ordering has already changed several times during the lifetime of
Perl 5.  Also, the ordering of hash keys has always been, and
continues to be, affected by the insertion order.
<P>

The added randomness may affect applications.
<P>

One possible scenario is when output of an application has included
hash data.  For example, if you have used the Data::Dumper module to
dump data into different files, and then compared the files to see
whether the data has changed, now you will have false positives since
the order in which hashes are dumped will vary.  In general the cure
is to sort the keys (or the values); in particular for Data::Dumper to
use the <TT>&quot;Sortkeys&quot;</TT> option.  If some particular order is really
important, use tied hashes: for example the Tie::IxHash module
which by default preserves the order in which the hash elements
were added.
<P>

More subtle problem is reliance on the order of ``global destruction''.
That is what happens at the end of execution: Perl destroys all data
structures, including user data.  If your destructors (the <FONT SIZE="-1">DESTROY</FONT>
subroutines) have assumed any particular ordering to the global
destruction, there might be problems ahead.  For example, in a
destructor of one object you cannot assume that objects of any other
class are still available, unless you hold a reference to them.
If the environment variable <FONT SIZE="-1">PERL_DESTRUCT_LEVEL</FONT> is set to a non-zero
value, or if Perl is exiting a spawned thread, it will also destruct
the ordinary references and the symbol tables that are no longer in use.
You can't call a class method or an ordinary function on a class that
has been collected that way.
<P>

The hash randomisation is certain to reveal hidden assumptions about
some particular ordering of hash elements, and outright bugs: it
revealed a few bugs in the Perl core and core modules.
<P>

To disable the hash randomisation in runtime, set the environment
variable <FONT SIZE="-1">PERL_HASH_SEED</FONT> to 0 (zero) before running Perl (for more
information see ``<FONT SIZE="-1">PERL_HASH_SEED</FONT>'' in perlrun), or to disable the feature
completely in compile time, compile with <TT>&quot;-DNO_HASH_SEED&quot;</TT> (see <I></I><FONT SIZE="-1"><I>INSTALL</I></FONT><I></I>).
<P>

See ``Algorithmic Complexity Attacks'' in perlsec for the original
rationale behind this change.
<A NAME="lbAF">&nbsp;</A>
<H2><FONT SIZE="-1">UTF-8</FONT> On Filehandles <B>Longer Activated By </B>Locale





</H2>

<A NAME="ixAAF"></A>
In Perl 5.8.0 all filehandles, including the standard filehandles,
were implicitly set to be in Unicode <FONT SIZE="-1">UTF-8</FONT> if the locale settings
indicated the use of <FONT SIZE="-1">UTF-8</FONT>.  This feature caused too many problems,
so the feature was turned off and redesigned: see ``Core Enhancements''.
<A NAME="lbAG">&nbsp;</A>
<H2>Single-number v-strings are no longer v-strings before =&gt;</H2>



<A NAME="ixAAG"></A>
The version strings or v-strings (see ``Version Strings'' in perldata)
feature introduced in Perl 5.6.0 has been a source of some confusion---
especially when the user did not want to use it, but Perl thought it
knew better.  Especially troublesome has been the feature that before
a ``=&gt;'' a version string (a ``v'' followed by digits) has been interpreted
as a v-string instead of a string literal.  In other words:
<P>



<PRE>
        %h = ( v65 =&gt; 42 );

</PRE>


<P>

has meant since Perl 5.6.0
<P>



<PRE>
        %h = ( 'A' =&gt; 42 );

</PRE>


<P>

(at least in platforms of <FONT SIZE="-1">ASCII</FONT> progeny)  Perl 5.8.1 restores the
more natural interpretation
<P>



<PRE>
        %h = ( 'v65' =&gt; 42 );

</PRE>


<P>

The multi-number v-strings like v65.66 and 65.66.67 still continue to
be v-strings in Perl 5.8.
<A NAME="lbAH">&nbsp;</A>
<H2>(Win32) The -C Switch Has Been Repurposed</H2>

<A NAME="ixAAH"></A>
The -C switch has changed in an incompatible way.  The old semantics
of this switch only made sense in Win32 and only in the ``use utf8''
universe in 5.6.x releases, and do not make sense for the Unicode
implementation in 5.8.0.  Since this switch could not have been used
by anyone, it has been repurposed.  The behavior that this switch
enabled in 5.6.x releases may be supported in a transparent,
data-dependent fashion in a future release.
<P>

For the new life of this switch, see ``<FONT SIZE="-1">UTF-8</FONT> no longer default under <FONT SIZE="-1">UTF-8</FONT> locales'', and ``-C'' in perlrun.
<A NAME="lbAI">&nbsp;</A>
<H2>(Win32) The /d Switch Of cmd.exe

</H2>

<A NAME="ixAAI"></A>
Perl 5.8.1 uses the /d switch when running the cmd.exe shell
internally for <I>system()</I>, backticks, and when opening pipes to external
programs.  The extra switch disables the execution of AutoRun commands
from the registry, which is generally considered undesirable when
running external programs.  If you wish to retain compatibility with
the older behavior, set <FONT SIZE="-1">PERL5SHELL</FONT> in your environment to <TT>&quot;cmd /x/c&quot;</TT>.
<A NAME="lbAJ">&nbsp;</A>
<H2>Core Enhancements</H2>

<A NAME="ixAAJ"></A>
<A NAME="lbAK">&nbsp;</A>
<H2><FONT SIZE="-1">UTF-8</FONT> no longer default under <FONT SIZE="-1">UTF-8</FONT> locales</H2>

<A NAME="ixAAK"></A>
In Perl 5.8.0 many Unicode features were introduced.   One of them
was found to be of more nuisance than benefit: the automagic
(and silent) ``UTF-8-ification'' of filehandles, including the
standard filehandles, if the user's locale settings indicated
use of <FONT SIZE="-1">UTF-8</FONT>.
<P>

For example, if you had <TT>&quot;en_US.UTF-8&quot;</TT> as your locale, your <FONT SIZE="-1">STDIN</FONT> and
<FONT SIZE="-1">STDOUT</FONT> were automatically ``<FONT SIZE="-1">UTF-8</FONT>'', in other words an implicit
binmode(..., ``:utf8'') was made.  This meant that trying to print, say,
<I>chr</I>(0xff), ended up printing the bytes 0xc3 0xbf.  Hardly what
you had in mind unless you were aware of this feature of Perl 5.8.0.
The problem is that the vast majority of people weren't: for example
in RedHat releases 8 and 9 the <B>default</B> locale setting is <FONT SIZE="-1">UTF-8</FONT>, so
all RedHat users got <FONT SIZE="-1">UTF-8</FONT> filehandles, whether they wanted it or not.
The pain was intensified by the Unicode implementation of Perl 5.8.0
(still) having nasty bugs, especially related to the use of s/// and
tr///.  (Bugs that have been fixed in 5.8.1)
<P>

Therefore a decision was made to backtrack the feature and change it
from implicit silent default to explicit conscious option.  The new
Perl command line option <TT>&quot;-C&quot;</TT> and its counterpart environment
variable <FONT SIZE="-1">PERL_UNICODE</FONT> can now be used to control how Perl and Unicode
interact at interfaces like I/O and for example the command line
arguments.  See ``-C'' in perlrun and ``<FONT SIZE="-1">PERL_UNICODE</FONT>'' in perlrun for more
information.
<A NAME="lbAL">&nbsp;</A>
<H2>Unsafe signals again available</H2>

<A NAME="ixAAL"></A>
In Perl 5.8.0 the so-called ``safe signals'' were introduced.  This
means that Perl no longer handles signals immediately but instead
``between opcodes'', when it is safe to do so.  The earlier immediate
handling easily could corrupt the internal state of Perl, resulting
in mysterious crashes.
<P>

However, the new safer model has its problems too.  Because now an
opcode, a basic unit of Perl execution, is never interrupted but
instead let to run to completion, certain operations that can take a
long time now really do take a long time.  For example, certain
network operations have their own blocking and timeout mechanisms, and
being able to interrupt them immediately would be nice.
<P>

Therefore perl 5.8.1 introduces a ``backdoor'' to restore the pre-5.8.0
(pre-5.7.3, really) signal behaviour.  Just set the environment variable
<FONT SIZE="-1">PERL_SIGNALS</FONT> to <TT>&quot;unsafe&quot;</TT>, and the old immediate (and unsafe)
signal handling behaviour returns.  See ``<FONT SIZE="-1">PERL_SIGNALS</FONT>'' in perlrun
and ``Deferred Signals (Safe Signals)'' in perlipc.
<P>

In completely unrelated news, you can now use safe signals with
POSIX::SigAction.  See ``POSIX::SigAction'' in <FONT SIZE="-1">POSIX</FONT>.
<A NAME="lbAM">&nbsp;</A>
<H2>Tied Arrays with Negative Array Indices</H2>

<A NAME="ixAAM"></A>
Formerly, the indices passed to <TT>&quot;FETCH&quot;</TT>, <TT>&quot;STORE&quot;</TT>, <TT>&quot;EXISTS&quot;</TT>, and
<TT>&quot;DELETE&quot;</TT> methods in tied array class were always non-negative.  If
the actual argument was negative, Perl would call <FONT SIZE="-1">FETCHSIZE</FONT> implicitly
and add the result to the index before passing the result to the tied
array method.  This behaviour is now optional.  If the tied array class
contains a package variable named <TT>$NEGATIVE_INDICES</TT> which is set to
a true value, negative values will be passed to <TT>&quot;FETCH&quot;</TT>, <TT>&quot;STORE&quot;</TT>,
<TT>&quot;EXISTS&quot;</TT>, and <TT>&quot;DELETE&quot;</TT> unchanged.
<A NAME="lbAN">&nbsp;</A>
<H2>local ${$x}</H2>

<A NAME="ixAAN"></A>
The syntaxes
<P>



<PRE>
        local ${$x}
        local @{$x}
        local %{$x}

</PRE>


<P>

now do localise variables, given that the <TT>$x</TT> is a valid variable name.
<A NAME="lbAO">&nbsp;</A>
<H2>Unicode Character Database 4.0.0</H2>

<A NAME="ixAAO"></A>
The copy of the Unicode Character Database included in Perl 5.8 has
been updated to 4.0.0 from 3.2.0.  This means for example that the
Unicode character properties are as in Unicode 4.0.0.
<A NAME="lbAP">&nbsp;</A>
<H2>Deprecation Warnings</H2>

<A NAME="ixAAP"></A>
There is one new feature deprecation.  Perl 5.8.0 forgot to add
some deprecation warnings, these warnings have now been added.
Finally, a reminder of an impending feature removal.
<P>

<I>(Reminder) Pseudo-hashes are deprecated (really)</I>
<A NAME="ixAAQ"></A>
<P>

Pseudo-hashes were deprecated in Perl 5.8.0 and will be removed in
Perl 5.10.0, see perl58delta for details.  Each attempt to access
pseudo-hashes will trigger the warning <TT>&quot;Pseudo-hashes are deprecated&quot;</TT>.
If you really want to continue using pseudo-hashes but not to see the
deprecation warnings, use:
<P>



<PRE>
    no warnings 'deprecated';

</PRE>


<P>

Or you can continue to use the fields pragma, but please don't
expect the data structures to be pseudohashes any more.
<P>

<I>(Reminder) 5.005-style threads are deprecated (really)</I>
<A NAME="ixAAR"></A>
<P>

5.005-style threads (activated by <TT>&quot;use Thread;&quot;</TT>) were deprecated in
Perl 5.8.0 and will be removed after Perl 5.8, see perl58delta for
details.  Each 5.005-style thread creation will trigger the warning
<TT>&quot;5.005 threads are deprecated&quot;</TT>.  If you really want to continue
using the 5.005 threads but not to see the deprecation warnings, use:
<P>



<PRE>
    no warnings 'deprecated';

</PRE>


<P>

<I>(Reminder) The $* variable is deprecated (really)</I>
<A NAME="ixAAS"></A>
<P>

The <TT>$*</TT> variable controlling multi-line matching has been deprecated
and will be removed after 5.8.  The variable has been deprecated for a
long time, and a deprecation warning <TT>&quot;Use of $* is deprecated&quot;</TT> is given,
now the variable will just finally be removed.  The functionality has
been supplanted by the <TT>&quot;/s&quot;</TT> and <TT>&quot;/m&quot;</TT> modifiers on pattern matching.
If you really want to continue using the <TT>$*</TT>-variable but not to see
the deprecation warnings, use:
<P>



<PRE>
    no warnings 'deprecated';

</PRE>


<A NAME="lbAQ">&nbsp;</A>
<H2>Miscellaneous Enhancements</H2>

<A NAME="ixAAT"></A>
<TT>&quot;map&quot;</TT> in void context is no longer expensive. <TT>&quot;map&quot;</TT> is now context
aware, and will not construct a list if called in void context.
<P>

If a socket gets closed by the server while printing to it, the client
now gets a <FONT SIZE="-1">SIGPIPE</FONT>.  While this new feature was not planned, it fell
naturally out of PerlIO changes, and is to be considered an accidental
feature.
<P>

PerlIO::get_layers(<FONT SIZE="-1">FH</FONT>) returns the names of the PerlIO layers
active on a filehandle.
<P>

PerlIO::via layers can now have an optional <FONT SIZE="-1">UTF8</FONT> method to
indicate whether the layer wants to ``auto-:utf8'' the stream.
<P>

<I>utf8::is_utf8()</I> has been added as a quick way to test whether
a scalar is encoded internally in <FONT SIZE="-1">UTF-8</FONT> (Unicode).
<A NAME="lbAR">&nbsp;</A>
<H2>Modules and Pragmata</H2>

<A NAME="ixAAU"></A>
<A NAME="lbAS">&nbsp;</A>
<H2>Updated Modules And Pragmata</H2>

<A NAME="ixAAV"></A>
The following modules and pragmata have been updated since Perl 5.8.0:
<DL COMPACT>
<DT>base<DD>
<A NAME="ixAAW"></A>

<DT>B::Bytecode<DD>
<A NAME="ixAAX"></A>

In much better shape than it used to be.  Still far from perfect, but
maybe worth a try.
<DT>B::Concise<DD>
<A NAME="ixAAY"></A>

<DT>B::Deparse<DD>
<A NAME="ixAAZ"></A>
<DT>Benchmark<DD>
<A NAME="ixABA"></A>

An optional feature, <TT>&quot;:hireswallclock&quot;</TT>, now allows for high
resolution wall clock times (uses Time::HiRes).
<DT>ByteLoader<DD>
<A NAME="ixABB"></A>
See B::Bytecode.
<DT>bytes<DD>
<A NAME="ixABC"></A>
Now has bytes::substr.
<DT><FONT SIZE="-1">CGI</FONT><DD>
<A NAME="ixABD"></A>

<DT>charnames<DD>
<A NAME="ixABE"></A>

One can now have custom character name aliases.
<DT><FONT SIZE="-1">CPAN</FONT><DD>
<A NAME="ixABF"></A>
There is now a simple command line frontend to the <FONT SIZE="-1">CPAN</FONT>.pm
module called <I>cpan</I>.
<DT>Data::Dumper<DD>
<A NAME="ixABG"></A>
A new option, Pair, allows choosing the separator between hash keys
and values.
<DT>DB_File<DD>
<A NAME="ixABH"></A>

<DT>Devel::PPPort<DD>
<A NAME="ixABI"></A>
<DT>Digest::MD5<DD>
<A NAME="ixABJ"></A>
<DT>Encode<DD>
<A NAME="ixABK"></A>

Significant updates on the encoding pragma functionality
(tr/// and the <FONT SIZE="-1">DATA</FONT> filehandle, formats).


<P>


If a filehandle has been marked as to have an encoding, unmappable
characters are detected already during input, not later (when the
corrupted data is being used).


<P>


The <FONT SIZE="-1">ISO</FONT> 8859-6 conversion table has been corrected (the 0x30..0x39
erroneously mapped to U+0660..U+0669, instead of U+0030..U+0039).  The
<FONT SIZE="-1">GSM</FONT> 03.38 conversion did not handle escape sequences correctly.  The
<FONT SIZE="-1">UTF-7</FONT> encoding has been added (making Encode feature-complete with
Unicode::String).
<DT>fields<DD>
<A NAME="ixABL"></A>

<DT>libnet<DD>
<A NAME="ixABM"></A>
<DT>Math::BigInt<DD>
<A NAME="ixABN"></A>

A lot of bugs have been fixed since v1.60, the version included in Perl
v5.8.0. Especially noteworthy are the bug in Calc that caused div and mod to
fail for some large values, and the fixes to the handling of bad inputs.


<P>


Some new features were added, e.g. the <I>broot()</I> method, you can now pass
parameters to <I>config()</I> to change some settings at runtime, and it is now
possible to trap the creation of NaN and infinity.


<P>


As usual, some optimizations took place and made the math overall a tad
faster. In some cases, quite a lot faster, actually. Especially alternative
libraries like Math::BigInt::GMP benefit from this. In addition, a lot of the
quite clunky routines like <I>fsqrt()</I> and <I>flog()</I> are now much much faster.
<DT>MIME::Base64<DD>
<A NAME="ixABO"></A>

<DT><FONT SIZE="-1">NEXT</FONT><DD>
<A NAME="ixABP"></A>

Diamond inheritance now works.
<DT>Net::Ping<DD>
<A NAME="ixABQ"></A>

<DT>PerlIO::scalar<DD>
<A NAME="ixABR"></A>

Reading from non-string scalars (like the special variables, see
perlvar) now works.
<DT>podlators<DD>
<A NAME="ixABS"></A>

<DT>Pod::LaTeX<DD>
<A NAME="ixABT"></A>
<DT>PodParsers<DD>
<A NAME="ixABU"></A>
<DT>Pod::Perldoc<DD>
<A NAME="ixABV"></A>

Complete rewrite.  As a side-effect, no longer refuses to startup when
run by root.
<DT>Scalar::Util<DD>
<A NAME="ixABW"></A>
New utilities: refaddr, isvstring, looks_like_number, set_prototype.
<DT>Storable<DD>
<A NAME="ixABX"></A>
Can now store code references (via B::Deparse, so not foolproof).
<DT>strict<DD>
<A NAME="ixABY"></A>
Earlier versions of the strict pragma did not check the parameters
implicitly passed to its ``import'' (use) and ``unimport'' (no) routine.
This caused the false idiom such as:


<P>




<PRE>
        use strict qw(@ISA);
        @ISA = qw(Foo);

</PRE>




<P>


This however (probably) raised the false expectation that the strict
refs, vars and subs were being enforced (and that <TT>@ISA</TT> was somehow
``declared'').  But the strict refs, vars, and subs are <B>not</B> enforced
when using this false idiom.


<P>


Starting from Perl 5.8.1, the above <B>will</B> cause an error to be
raised.  This may cause programs which used to execute seemingly
correctly without warnings and errors to fail when run under 5.8.1.
This happens because


<P>




<PRE>
        use strict qw(@ISA);

</PRE>




<P>


will now fail with the error:


<P>




<PRE>
        Unknown 'strict' tag(s) '@ISA'

</PRE>




<P>


The remedy to this problem is to replace this code with the correct idiom:


<P>




<PRE>
        use strict;
        use vars qw(@ISA);
        @ISA = qw(Foo);

</PRE>


<DT>Term::ANSIcolor<DD>
<A NAME="ixABZ"></A>

<DT>Test::Harness<DD>
<A NAME="ixACA"></A>

Now much more picky about extra or missing output from test scripts.
<DT>Test::More<DD>
<A NAME="ixACB"></A>

<DT>Test::Simple<DD>
<A NAME="ixACC"></A>
<DT>Text::Balanced<DD>
<A NAME="ixACD"></A>
<DT>Time::HiRes<DD>
<A NAME="ixACE"></A>

Use of <I>nanosleep()</I>, if available, allows mixing subsecond sleeps with
alarms.
<DT>threads<DD>
<A NAME="ixACF"></A>
Several fixes, for example for <I>join()</I> problems and memory
leaks.  In some platforms (like Linux) that use glibc the minimum memory
footprint of one ithread has been reduced by several hundred kilobytes.
<DT>threads::shared<DD>
<A NAME="ixACG"></A>
Many memory leaks have been fixed.
<DT>Unicode::Collate<DD>
<A NAME="ixACH"></A>

<DT>Unicode::Normalize<DD>
<A NAME="ixACI"></A>
<DT>Win32::GetFolderPath<DD>
<A NAME="ixACJ"></A>
<DT>Win32::GetOSVersion<DD>
<A NAME="ixACK"></A>

Now returns extra information.
</DL>
<A NAME="lbAT">&nbsp;</A>
<H2>Utility Changes</H2>

<A NAME="ixACL"></A>
The <TT>&quot;h2xs&quot;</TT> utility now produces a more modern layout:
<I>Foo-Bar/lib/Foo/Bar.pm</I> instead of <I>Foo/Bar/Bar.pm</I>.
Also, the boilerplate test is now called <I>t/Foo-Bar.t</I>
instead of <I>t/1.t</I>.
<P>

The Perl debugger (<I>lib/perl5db.pl</I>) has now been extensively
documented and bugs found while documenting have been fixed.
<P>

<TT>&quot;perldoc&quot;</TT> has been rewritten from scratch to be more robust and
featureful.
<P>

<TT>&quot;perlcc -B&quot;</TT> works now at least somewhat better, while <TT>&quot;perlcc -c&quot;</TT>
is rather more broken.  (The Perl compiler suite as a whole continues
to be experimental.)
<A NAME="lbAU">&nbsp;</A>
<H2>New Documentation</H2>

<A NAME="ixACM"></A>
perl573delta has been added to list the differences between the
(now quite obsolete) development releases 5.7.2 and 5.7.3.
<P>

perl58delta has been added: it is the perldelta of 5.8.0, detailing
the differences between 5.6.0 and 5.8.0.
<P>

perlartistic has been added: it is the Artistic License in pod format,
making it easier for modules to refer to it.
<P>

perlcheat has been added: it is a Perl cheat sheet.
<P>

perlgpl has been added: it is the <FONT SIZE="-1">GNU</FONT> General Public License in pod
format, making it easier for modules to refer to it.
<P>

perlmacosx has been added to tell about the installation and use
of Perl in Mac <FONT SIZE="-1">OS</FONT> X.
<P>

perlos400 has been added to tell about the installation and use
of Perl in <FONT SIZE="-1">OS/400</FONT> <FONT SIZE="-1">PASE</FONT>.
<P>

perlreref has been added: it is a regular expressions quick reference.
<A NAME="lbAV">&nbsp;</A>
<H2>Installation and Configuration Improvements</H2>

<A NAME="ixACN"></A>
The <FONT SIZE="-1">UNIX</FONT> standard Perl location, <I>/usr/bin/perl</I>, is no longer
overwritten by default if it exists.  This change was very prudent
because so many <FONT SIZE="-1">UNIX</FONT> vendors already provide a <I>/usr/bin/perl</I>,
but simultaneously many system utilities may depend on that
exact version of Perl, so better not to overwrite it.
<P>

One can now specify installation directories for site and vendor man
and <FONT SIZE="-1">HTML</FONT> pages, and site and vendor scripts.  See <I></I><FONT SIZE="-1"><I>INSTALL</I></FONT><I></I>.
<P>

One can now specify a destination directory for Perl installation
by specifying the <FONT SIZE="-1">DESTDIR</FONT> variable for <TT>&quot;make install&quot;</TT>.  (This feature
is slightly different from the previous <TT>&quot;Configure -Dinstallprefix=...&quot;</TT>.)
See <I></I><FONT SIZE="-1"><I>INSTALL</I></FONT><I></I>.
<P>

gcc versions 3.x introduced a new warning that caused a lot of noise
during Perl compilation: <TT>&quot;gcc -Ialreadyknowndirectory (warning:
changing search order)&quot;</TT>.  This warning has now been avoided by
Configure weeding out such directories before the compilation.
<P>

One can now build subsets of Perl core modules by using the
Configure flags <TT>&quot;-Dnoextensions=...&quot;</TT> and <TT>&quot;-Donlyextensions=...&quot;</TT>,
see <I></I><FONT SIZE="-1"><I>INSTALL</I></FONT><I></I>.
<A NAME="lbAW">&nbsp;</A>
<H2>Platform-specific enhancements</H2>

<A NAME="ixACO"></A>
In Cygwin Perl can now be built with threads (<TT>&quot;Configure -Duseithreads&quot;</TT>).
This works with both Cygwin 1.3.22 and Cygwin 1.5.3.
<P>

In newer FreeBSD releases Perl 5.8.0 compilation failed because of
trying to use <I>malloc.h</I>, which in FreeBSD is just a dummy file, and
a fatal error to even try to use.  Now <I>malloc.h</I> is not used.
<P>

Perl is now known to build also in Hitachi <FONT SIZE="-1">HI-UXMPP</FONT>.
<P>

Perl is now known to build again in LynxOS.
<P>

Mac <FONT SIZE="-1">OS</FONT> X now installs with Perl version number embedded in
installation directory names for easier upgrading of user-compiled
Perl, and the installation directories in general are more standard.
In other words, the default installation no longer breaks the
Apple-provided Perl.  On the other hand, with <TT>&quot;Configure -Dprefix=/usr&quot;</TT>
you can now really replace the Apple-supplied Perl (<B>please be careful</B>).
<P>

Mac <FONT SIZE="-1">OS</FONT> X now builds Perl statically by default.  This change was done
mainly for faster startup times.  The Apple-provided Perl is still
dynamically linked and shared, and you can enable the sharedness for
your own Perl builds by <TT>&quot;Configure -Duseshrplib&quot;</TT>.
<P>

Perl has been ported to <FONT SIZE="-1">IBM</FONT>'s <FONT SIZE="-1">OS/400</FONT> <FONT SIZE="-1">PASE</FONT> environment.  The best way
to build a Perl for <FONT SIZE="-1">PASE</FONT> is to use an <FONT SIZE="-1">AIX</FONT> host as a cross-compilation
environment.  See <FONT SIZE="-1">README</FONT>.os400.
<P>

Yet another cross-compilation option has been added: now Perl builds
on OpenZaurus, an Linux distribution based on Mandrake + Embedix for
the Sharp Zaurus <FONT SIZE="-1">PDA</FONT>.  See the Cross/README file.
<P>

Tru64 when using gcc 3 drops the optimisation for <I>toke.c</I> to <TT>&quot;-O2&quot;</TT>
because of gigantic memory use with the default <TT>&quot;-O3&quot;</TT>.
<P>

Tru64 can now build Perl with the newer Berkeley DBs.
<P>

Building Perl on WinCE has been much enhanced, see <I></I><FONT SIZE="-1"><I>README</I></FONT><I>.ce</I>
and <I></I><FONT SIZE="-1"><I>README</I></FONT><I>.perlce</I>.
<A NAME="lbAX">&nbsp;</A>
<H2>Selected Bug Fixes</H2>

<A NAME="ixACP"></A>
<A NAME="lbAY">&nbsp;</A>
<H2>Closures, eval and lexicals</H2>

<A NAME="ixACQ"></A>
There have been many fixes in the area of anonymous subs, lexicals and
closures.  Although this means that Perl is now more ``correct'', it is
possible that some existing code will break that happens to rely on
the faulty behaviour.  In practice this is unlikely unless your code
contains a very complex nesting of anonymous subs, evals and lexicals.
<A NAME="lbAZ">&nbsp;</A>
<H2>Generic fixes</H2>

<A NAME="ixACR"></A>
If an input filehandle is marked <TT>&quot;:utf8&quot;</TT> and Perl sees illegal <FONT SIZE="-1">UTF-8</FONT>
coming in when doing <TT>&quot;&lt;FH&gt;&quot;</TT>, if warnings are enabled a warning is
immediately given - instead of being silent about it and Perl being
unhappy about the broken data later.  (The <TT>&quot;:encoding(utf8)&quot;</TT> layer
also works the same way.)
<P>

binmode(<FONT SIZE="-1">SOCKET</FONT>, ``:utf8'') only worked on the input side, not on the
output side of the socket.  Now it works both ways.
<P>

For threaded Perls certain system database functions like <I>getpwent()</I>
and <I>getgrent()</I> now grow their result buffer dynamically, instead of
failing.  This means that at sites with lots of users and groups the
functions no longer fail by returning only partial results.
<P>

Perl 5.8.0 had accidentally broken the capability for users
to define their own uppercase&lt;-&gt;lowercase Unicode mappings
(as advertised by the Camel).  This feature has been fixed and
is also documented better.
<P>

In 5.8.0 this
<P>



<PRE>
        $some_unicode .= &lt;FH&gt;;

</PRE>


<P>

didn't work correctly but instead corrupted the data.  This has now
been fixed.
<P>

Tied methods like <FONT SIZE="-1">FETCH</FONT> etc. may now safely access tied values, i.e.
resulting in a recursive call to <FONT SIZE="-1">FETCH</FONT> etc.  Remember to break the
recursion, though.
<P>

At startup Perl blocks the <FONT SIZE="-1">SIGFPE</FONT> signal away since there isn't much
Perl can do about it.  Previously this blocking was in effect also for
programs executed from within Perl.  Now Perl restores the original
<FONT SIZE="-1">SIGFPE</FONT> handling routine, whatever it was, before running external
programs.
<P>

Linenumbers in Perl scripts may now be greater than 65536, or 2**16.
(Perl scripts have always been able to be larger than that, it's just
that the linenumber for reported errors and warnings have ``wrapped
around''.)  While scripts that large usually indicate a need to rethink
your code a bit, such Perl scripts do exist, for example as results
from generated code.  Now linenumbers can go all the way to
4294967296, or 2**32.
<A NAME="lbBA">&nbsp;</A>
<H2>Platform-specific fixes</H2>

<A NAME="ixACS"></A>
Linux
<DL COMPACT>
<DT>*<DD>
Setting <TT>$0</TT> works again (with certain limitations that
Perl cannot do much about: see ``$0'' in perlvar)
</DL>
<P>

HP-UX
<DL COMPACT>
<DT>*<DD>
Setting <TT>$0</TT> now works.
</DL>
<P>

<FONT SIZE="-1">VMS</FONT>
<DL COMPACT>
<DT>*<DD>
Configuration now tests for the presence of <TT>&quot;poll()&quot;</TT>, and IO::Poll
now uses the vendor-supplied function if detected.
<DT>*<DD>
A rare access violation at Perl start-up could occur if the Perl image was
installed with privileges or if there was an identifier with the
subsystem attribute set in the process's rightslist.  Either of these
circumstances triggered tainting code that contained a pointer bug. 
The faulty pointer arithmetic has been fixed.
<DT>*<DD>
The length limit on values (not keys) in the <TT>%ENV</TT> hash has been raised
from 255 bytes to 32640 bytes (except when the <FONT SIZE="-1">PERL_ENV_TABLES</FONT> setting
overrides the default use of logical names for <TT>%ENV</TT>).  If it is
necessary to access these long values from outside Perl, be aware that
they are implemented using search list logical names that store the
value in pieces, each 255-byte piece (up to 128 of them) being an
element in the search list. When doing a lookup in <TT>%ENV</TT> from within
Perl, the elements are combined into a single value.  The existing
VMS-specific ability to access individual elements of a search list
logical name via the <TT>$ENV</TT>{'foo;N'} syntax (where N is the search list
index) is unimpaired.
<DT>*<DD>
The piping implementation now uses local rather than global <FONT SIZE="-1">DCL</FONT>
symbols for inter-process communication.
<DT>*<DD>
File::Find could become confused when navigating to a relative
directory whose name collided with a logical name.  This problem has
been corrected by adding directory syntax to relative path names, thus
preventing logical name translation.
</DL>
<P>

Win32
<DL COMPACT>
<DT>*<DD>
A memory leak in the <I>fork()</I> emulation has been fixed.
<DT>*<DD>
The return value of the <I>ioctl()</I> built-in function was accidentally
broken in 5.8.0.  This has been corrected.
<DT>*<DD>
The internal message loop executed by perl during blocking operations
sometimes interfered with messages that were external to Perl.
This often resulted in blocking operations terminating prematurely or
returning incorrect results, when Perl was executing under environments
that could generate Windows messages.  This has been corrected.
<DT>*<DD>
Pipes and sockets are now automatically in binary mode.
<DT>*<DD>
The four-argument form of <I>select()</I> did not preserve $! (errno) properly
when there were errors in the underlying call.  This is now fixed.
<DT>*<DD>
The ``<FONT SIZE="-1">CR</FONT> <FONT SIZE="-1">CR</FONT> <FONT SIZE="-1">LF</FONT>'' problem of has been fixed, binmode(<FONT SIZE="-1">FH</FONT>, ``:crlf'')
is now effectively a no-op.
</DL>
<A NAME="lbBB">&nbsp;</A>
<H2>New or Changed Diagnostics</H2>

<A NAME="ixACT"></A>
All the warnings related to <I>pack()</I> and <I>unpack()</I> were made more
informative and consistent.
<A NAME="lbBC">&nbsp;</A>
<H2>Changed A thread exited while %d threads were running</H2>



<A NAME="ixACU"></A>
The old version
<P>



<PRE>
    A thread exited while %d other threads were still running

</PRE>


<P>

was misleading because the ``other'' included also the thread giving
the warning.
<A NAME="lbBD">&nbsp;</A>
<H2>Removed Attempt to clear a restricted hash</H2>



<A NAME="ixACV"></A>
It is not illegal to clear a restricted hash, so the warning
was removed.
<A NAME="lbBE">&nbsp;</A>
<H2>New Illegal declaration of anonymous subroutine</H2>



<A NAME="ixACW"></A>
You must specify the block of code for <TT>&quot;sub&quot;</TT>.
<A NAME="lbBF">&nbsp;</A>
<H2>Changed Invalid range %s in transliteration operator</H2>



<A NAME="ixACX"></A>
The old version
<P>



<PRE>
    Invalid [] range &quot;%s&quot; in transliteration operator

</PRE>


<P>

was simply wrong because there are no ``[] ranges'' in tr///.
<A NAME="lbBG">&nbsp;</A>
<H2>New Missing control char name in \c</H2>



<A NAME="ixACY"></A>
Self-explanatory.
<A NAME="lbBH">&nbsp;</A>
<H2>New Newline in left-justified string for %s</H2>



<A NAME="ixACZ"></A>
The padding spaces would appear after the newline, which is
probably not what you had in mind.
<A NAME="lbBI">&nbsp;</A>
<H2>New Possible precedence problem on bitwise %c operator</H2>



<A NAME="ixADA"></A>
If you think this
<P>



<PRE>
    $x &amp; $y == 0

</PRE>


<P>

tests whether the bitwise <FONT SIZE="-1">AND</FONT> of <TT>$x</TT> and <TT>$y</TT> is zero,
you will like this warning.
<A NAME="lbBJ">&nbsp;</A>
<H2>New Pseudo-hashes are deprecated</H2>



<A NAME="ixADB"></A>
This warning should have been already in 5.8.0, since they are.
<A NAME="lbBK">&nbsp;</A>
<H2>New </TT><I>read()</I> on %s filehandle <TT>%s</H2>



<A NAME="ixADC"></A>
You cannot </TT><I>read()</I> (or <I>sysread()</I>) from a closed or unopened filehandle.
<A NAME="lbBL">&nbsp;</A>
<H2>New 5.005 threads are deprecated</H2>



<A NAME="ixADD"></A>
This warning should have been already in 5.8.0, since they are.
<A NAME="lbBM">&nbsp;</A>
<H2>New Tied variable freed while still in use</H2>



<A NAME="ixADE"></A>
Something pulled the plug on a live tied variable, Perl plays
safe by bailing out.
<A NAME="lbBN">&nbsp;</A>
<H2>New To%s: illegal mapping '%s'</H2>



<A NAME="ixADF"></A>
An illegal user-defined Unicode casemapping was specified.
<A NAME="lbBO">&nbsp;</A>
<H2>New Use of freed value in iteration</H2>



<A NAME="ixADG"></A>
Something modified the values being iterated over.  This is not good.
<A NAME="lbBP">&nbsp;</A>
<H2>Changed Internals</H2>

<A NAME="ixADH"></A>
These news matter to you only if you either write <FONT SIZE="-1">XS</FONT> code or like to
know about or hack Perl internals (using Devel::Peek or any of the
<TT>&quot;B::&quot;</TT> modules counts), or like to run Perl with the <TT>&quot;-D&quot;</TT> option.
<P>

The embedding examples of perlembed have been reviewed to be
uptodate and consistent: for example, the correct use of
<FONT SIZE="-1"><I>PERL_SYS_INIT3</I></FONT><I>()</I> and <FONT SIZE="-1"><I>PERL_SYS_TERM</I></FONT><I>()</I>.
<P>

Extensive reworking of the pad code (the code responsible
for lexical variables) has been conducted by Dave Mitchell.
<P>

Extensive work on the v-strings by John Peacock.
<P>

<FONT SIZE="-1">UTF-8</FONT> length and position cache: to speed up the handling of Unicode
(<FONT SIZE="-1">UTF-8</FONT>) scalars, a cache was introduced.  Potential problems exist if
an extension bypasses the official APIs and directly modifies the <FONT SIZE="-1">PV</FONT>
of an <FONT SIZE="-1">SV:</FONT> the <FONT SIZE="-1">UTF-8</FONT> cache does not get cleared as it should.
<P>

APIs obsoleted in Perl 5.8.0, like sv_2pv, sv_catpvn, sv_catsv,
sv_setsv, are again available.
<P>

Certain Perl core C APIs like cxinc and regatom are no longer
available at all to code outside the Perl core of the Perl core
extensions.  This is intentional.  They never should have been
available with the shorter names, and if you application depends on
them, you should (be ashamed and) contact perl5-porters to discuss
what are the proper APIs.
<P>

Certain Perl core C APIs like <TT>&quot;Perl_list&quot;</TT> are no longer available
without their <TT>&quot;Perl_&quot;</TT> prefix.  If your <FONT SIZE="-1">XS</FONT> module stops working
because some functions cannot be found, in many cases a simple fix is
to add the <TT>&quot;Perl_&quot;</TT> prefix to the function and the thread context
<TT>&quot;aTHX_&quot;</TT> as the first argument of the function call.  This is also how
it should always have been done: letting the Perl_-less forms to leak
from the core was an accident.  For cleaner embedding you can also
force this for all APIs by defining at compile time the cpp define
<FONT SIZE="-1">PERL_NO_SHORT_NAMES</FONT>.
<P>

<I>Perl_save_bool()</I> has been added.
<P>

Regexp objects (those created with <TT>&quot;qr&quot;</TT>) now have S-magic rather than
R-magic.  This fixed regexps of the form /...(??{...;$x})/ to no
longer ignore changes made to <TT>$x</TT>.  The S-magic avoids dropping
the caching optimization and making (??{...}) constructs obscenely
slow (and consequently useless).  See also ``Magic Variables'' in perlguts.
Regexp::Copy was affected by this change.
<P>

The Perl internal debugging macros <FONT SIZE="-1"><I>DEBUG</I></FONT><I>()</I> and <FONT SIZE="-1"><I>DEB</I></FONT><I>()</I> have been renamed
to <FONT SIZE="-1"><I>PERL_DEBUG</I></FONT><I>()</I> and <FONT SIZE="-1"><I>PERL_DEB</I></FONT><I>()</I> to avoid namespace conflicts.
<P>

<TT>&quot;-DL&quot;</TT> removed (the leaktest had been broken and unsupported for years,
use alternative debugging mallocs or tools like valgrind and Purify).
<P>

Verbose modifier <TT>&quot;v&quot;</TT> added for <TT>&quot;-DXv&quot;</TT> and <TT>&quot;-Dsv&quot;</TT>, see perlrun.
<A NAME="lbBQ">&nbsp;</A>
<H2>New Tests</H2>

<A NAME="ixADI"></A>
In Perl 5.8.0 there were about 69000 separate tests in about 700 test files,
in Perl 5.8.1 there are about 77000 separate tests in about 780 test files.
The exact numbers depend on the Perl configuration and on the operating
system platform.
<A NAME="lbBR">&nbsp;</A>
<H2>Known Problems</H2>

<A NAME="ixADJ"></A>
The hash randomisation mentioned in ``Incompatible Changes'' is definitely
problematic: it will wake dormant bugs and shake out bad assumptions.
<P>

If you want to use mod_perl 2.x with Perl 5.8.1, you will need
mod_perl-1.99_10 or higher.  Earlier versions of mod_perl 2.x
do not work with the randomised hashes.  (mod_perl 1.x works fine.)
You will also need Apache::Test 1.04 or higher.
<P>

Many of the rarer platforms that worked 100% or pretty close to it
with perl 5.8.0 have been left a little bit untended since their
maintainers have been otherwise busy lately, and therefore there will
be more failures on those platforms.  Such platforms include Mac <FONT SIZE="-1">OS</FONT>
Classic, <FONT SIZE="-1">IBM</FONT> z/OS (and other <FONT SIZE="-1">EBCDIC</FONT> platforms), and NetWare.  The most
common Perl platforms (Unix and Unix-like, Microsoft platforms, and
<FONT SIZE="-1">VMS</FONT>) have large enough testing and expert population that they are
doing well.
<A NAME="lbBS">&nbsp;</A>
<H2>Tied hashes in scalar context</H2>

<A NAME="ixADK"></A>
Tied hashes do not currently return anything useful in scalar context,
for example when used as boolean tests:
<P>



<PRE>
        if (%tied_hash) { ... }

</PRE>


<P>

The current nonsensical behaviour is always to return false,
regardless of whether the hash is empty or has elements.
<P>

The root cause is that there is no interface for the implementors of
tied hashes to implement the behaviour of a hash in scalar context.
<A NAME="lbBT">&nbsp;</A>
<H2>Net::Ping 450_service and 510_ping_udp failures</H2>

<A NAME="ixADL"></A>
The subtests 9 and 18 of lib/Net/Ping/t/450_service.t, and the
subtest 2 of lib/Net/Ping/t/510_ping_udp.t might fail if you have
an unusual networking setup.  For example in the latter case the
test is trying to send a <FONT SIZE="-1">UDP</FONT> ping to the <FONT SIZE="-1">IP</FONT> address 127.0.0.1.
<A NAME="lbBU">&nbsp;</A>
<H2>B::C</H2>

<A NAME="ixADM"></A>
The C-generating compiler backend B::C (the frontend being
<TT>&quot;perlcc -c&quot;</TT>) is even more broken than it used to be because of
the extensive lexical variable changes.  (The good news is that
B::Bytecode and ByteLoader are better than they used to be.)
<A NAME="lbBV">&nbsp;</A>
<H2>Platform Specific Problems</H2>

<A NAME="ixADN"></A>
<A NAME="lbBW">&nbsp;</A>
<H2><FONT SIZE="-1">EBCDIC</FONT> Platforms</H2>

<A NAME="ixADO"></A>
<FONT SIZE="-1">IBM</FONT> z/OS and other <FONT SIZE="-1">EBCDIC</FONT> platforms continue to be problematic
regarding Unicode support.  Many Unicode tests are skipped when
they really should be fixed.
<A NAME="lbBX">&nbsp;</A>
<H2>Cygwin 1.5 problems</H2>

<A NAME="ixADP"></A>
In Cygwin 1.5 the <I>io/tell</I> and <I>op/sysio</I> tests have failures for
some yet unknown reason.  In 1.5.5 the threads tests stress_cv,
stress_re, and stress_string are failing unless the environment
variable <FONT SIZE="-1">PERLIO</FONT> is set to ``perlio'' (which makes also the io/tell
failure go away).
<P>

Perl 5.8.1 does build and work well with Cygwin 1.3: with (uname -a)
<TT>&quot;CYGWIN_NT-5.0 ... 1.3.22(0.78/3/2) 2003-03-18 09:20 i686 ...&quot;</TT>
a 100% ``make test''  was achieved with <TT>&quot;Configure -des -Duseithreads&quot;</TT>.
<A NAME="lbBY">&nbsp;</A>
<H2><FONT SIZE="-1">HP-UX:</FONT> <FONT SIZE="-1">HP</FONT> cc warnings about sendfile and sendpath</H2>

<A NAME="ixADQ"></A>
With certain <FONT SIZE="-1">HP</FONT> C compiler releases (e.g. B.11.11.02) you will
get many warnings like this (lines wrapped for easier reading):
<P>



<PRE>
  cc: &quot;/usr/include/sys/socket.h&quot;, line 504: warning 562:
    Redeclaration of &quot;sendfile&quot; with a different storage class specifier:
      &quot;sendfile&quot; will have internal linkage.
  cc: &quot;/usr/include/sys/socket.h&quot;, line 505: warning 562:
    Redeclaration of &quot;sendpath&quot; with a different storage class specifier:
      &quot;sendpath&quot; will have internal linkage.

</PRE>


<P>

The warnings show up both during the build of Perl and during certain
lib/ExtUtils tests that invoke the C compiler.  The warning, however,
is not serious and can be ignored.
<A NAME="lbBZ">&nbsp;</A>
<H2><FONT SIZE="-1">IRIX:</FONT> t/uni/tr_7jis.t falsely failing</H2>

<A NAME="ixADR"></A>
The test t/uni/tr_7jis.t is known to report failure under 'make test'
or the test harness with certain releases of <FONT SIZE="-1">IRIX</FONT> (at least <FONT SIZE="-1">IRIX</FONT> 6.5
and MIPSpro Compilers Version 7.3.1.1m), but if run manually the test
fully passes.
<A NAME="lbCA">&nbsp;</A>
<H2>Mac <FONT SIZE="-1">OS</FONT> X: no usemymalloc</H2>

<A NAME="ixADS"></A>
The Perl malloc (<TT>&quot;-Dusemymalloc&quot;</TT>) does not work at all in Mac <FONT SIZE="-1">OS</FONT> X.
This is not that serious, though, since the native malloc works just
fine.
<A NAME="lbCB">&nbsp;</A>
<H2>Tru64: <B>threaded builds with </B><FONT SIZE="-1"><B>GNU</B></FONT><B> cc (gcc)</B>

</H2>

<A NAME="ixADT"></A>
In the latest Tru64 releases (e.g. v5.1B or later) gcc cannot be used
to compile a threaded Perl (-Duseithreads) because the system
<TT>&quot;&lt;<A HREF="file:/usr/include/pthread.h">pthread.h</A>&gt;&quot;</TT> file doesn't know about gcc.
<A NAME="lbCC">&nbsp;</A>
<H2>Win32: sysopen, sysread, syswrite</H2>

<A NAME="ixADU"></A>
As of the 5.8.0 release, <I>sysopen()</I>/<I>sysread()</I>/<I>syswrite()</I> do not behave
like they used to in 5.6.1 and earlier with respect to ``text'' mode.
These built-ins now always operate in ``binary'' mode (even if <I>sysopen()</I>
was passed the O_TEXT flag, or if <I>binmode()</I> was used on the file
handle).  Note that this issue should only make a difference for disk
files, as sockets and pipes have always been in ``binary'' mode in the
Windows port.  As this behavior is currently considered a bug,
compatible behavior may be re-introduced in a future release.  Until
then, the use of <I>sysopen()</I>, <I>sysread()</I> and <I>syswrite()</I> is not supported
for ``text'' mode operations.
<A NAME="lbCD">&nbsp;</A>
<H2>Future Directions</H2>

<A NAME="ixADV"></A>
The following things <B>might</B> happen in future.  The first publicly
available releases having these characteristics will be the developer
releases Perl 5.9.x, culminating in the Perl 5.10.0 release.  These
are our best guesses at the moment: we reserve the right to rethink.
<DL COMPACT>
<DT>*<DD>
PerlIO will become The Default.  Currently (in Perl 5.8.x) the stdio
library is still used if Perl thinks it can use certain tricks to
make stdio go <B>really</B> fast.  For future releases our goal is to
make PerlIO go even faster.
<DT>*<DD>
A new feature called <I>assertions</I> will be available.  This means that
one can have code called assertions sprinkled in the code: usually
they are optimised away, but they can be enabled with the <TT>&quot;-A&quot;</TT> option.
<DT>*<DD>
A new operator <TT>&quot;//&quot;</TT> (defined-or) will be available.  This means that
one will be able to say


<P>




<PRE>
    $a // $b

</PRE>




<P>


instead of


<P>




<PRE>
   defined $a ? $a : $b

</PRE>




<P>


and


<P>




<PRE>
   $c //= $d;

</PRE>




<P>


instead of


<P>




<PRE>
   $c = $d unless defined $c;

</PRE>




<P>


The operator will have the same precedence and associativity as <TT>&quot;||&quot;</TT>.
A source code patch against the Perl 5.8.1 sources will be available
in <FONT SIZE="-1">CPAN</FONT> as <I>authors/id/H/HM/HMBRAND/dor-5.8.1.diff</I>.
<DT>*<DD>
<TT>&quot;unpack()&quot;</TT> will default to unpacking the <TT>$_</TT>.
<DT>*<DD>
Various Copy-On-Write techniques will be investigated in hopes
of speeding up Perl.
<DT>*<DD>
<FONT SIZE="-1">CPANPLUS</FONT>, Inline, and Module::Build will become core modules.
<DT>*<DD>
The ability to write true lexically scoped pragmas will be introduced.
<DT>*<DD>
Work will continue on the bytecompiler and byteloader.
<DT>*<DD>
v-strings as they currently exist are scheduled to be deprecated.  The
v-less form (1.2.3) will become a ``version object'' when used with <TT>&quot;use&quot;</TT>,
<TT>&quot;require&quot;</TT>, and <TT>$VERSION</TT>.  $^V will also be a ``version object'' so the
printf(``%vd'',...) construct will no longer be needed.  The v-ful version
(v1.2.3) will become obsolete.  The equivalence of strings and v-strings (e.g.
that currently 5.8.0 is equal to ``\5\8\0'') will go away.  <B>There may be no
deprecation warning for v-strings</B>, though: it is quite hard to detect when
v-strings are being used safely, and when they are not.
<DT>*<DD>
5.005 Threads Will Be Removed
<DT>*<DD>
The <TT>$*</TT> Variable Will Be Removed
(it was deprecated a long time ago)
<DT>*<DD>
Pseudohashes Will Be Removed
</DL>
<A NAME="lbCE">&nbsp;</A>
<H2>Reporting Bugs</H2>

<A NAME="ixADW"></A>
If you find what you think is a bug, you might check the articles
recently posted to the comp.lang.perl.misc newsgroup and the perl
bug database at <A HREF="http://bugs.perl.org/">http://bugs.perl.org/</A> .  There may also be
information at <A HREF="http://www.perl.com/">http://www.perl.com/</A> , the Perl Home Page.
<P>

If you believe you have an unreported bug, please run the <B>perlbug</B>
program included with your release.  Be sure to trim your bug down
to a tiny but sufficient test case.  Your bug report, along with the
output of <TT>&quot;perl -V&quot;</TT>, will be sent off to <A HREF="mailto:perlbug@perl.org">perlbug@perl.org</A> to be
analysed by the Perl porting team.  You can browse and search
the Perl 5 bugs at <A HREF="http://bugs.perl.org/">http://bugs.perl.org/</A>
<A NAME="lbCF">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixADX"></A>
The <I>Changes</I> file for exhaustive details on what changed.
<P>

The <I></I><FONT SIZE="-1"><I>INSTALL</I></FONT><I></I> file for how to build Perl.
<P>

The <I></I><FONT SIZE="-1"><I>README</I></FONT><I></I> file for general stuff.
<P>

The <I>Artistic</I> and <I>Copying</I> files for copyright information.
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">DESCRIPTION</A><DD>
<DT><A HREF="#lbAD">Incompatible Changes</A><DD>
<DT><A HREF="#lbAE">Hash Randomisation</A><DD>
<DT><A HREF="#lbAF"><FONT SIZE="-1">UTF-8</FONT> On Filehandles No Longer Activated By Locale</A><DD>
<DT><A HREF="#lbAG">Single-number v-strings are no longer v-strings before =&gt;</A><DD>
<DT><A HREF="#lbAH">(Win32) The -C Switch Has Been Repurposed</A><DD>
<DT><A HREF="#lbAI">(Win32) The /d Switch Of cmd.exe</A><DD>
<DT><A HREF="#lbAJ">Core Enhancements</A><DD>
<DT><A HREF="#lbAK"><FONT SIZE="-1">UTF-8</FONT> no longer default under <FONT SIZE="-1">UTF-8</FONT> locales</A><DD>
<DT><A HREF="#lbAL">Unsafe signals again available</A><DD>
<DT><A HREF="#lbAM">Tied Arrays with Negative Array Indices</A><DD>
<DT><A HREF="#lbAN">local ${$x}</A><DD>
<DT><A HREF="#lbAO">Unicode Character Database 4.0.0</A><DD>
<DT><A HREF="#lbAP">Deprecation Warnings</A><DD>
<DT><A HREF="#lbAQ">Miscellaneous Enhancements</A><DD>
<DT><A HREF="#lbAR">Modules and Pragmata</A><DD>
<DT><A HREF="#lbAS">Updated Modules And Pragmata</A><DD>
<DT><A HREF="#lbAT">Utility Changes</A><DD>
<DT><A HREF="#lbAU">New Documentation</A><DD>
<DT><A HREF=